(function(e){var t={id:"67e7812dffaeb4f7dd1863a4d34f02cb",filename:"userstatus.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){(QNR="QNR"in window?QNR:{}).UserStatusConfig={id:"loginPanel",title:"我的攻略",complate:function(){$("#__myMenuTitle__").css({margin:0,"padding-right":0,position:"relative"}).find("img").remove();$("#__myMenuInfo__").css({right:"50px",width:"56px","padding-left":"4px",top:"25px",position:"absolute","line-height":"21px","background-color":"#1badb6",color:"#fff"})}};(function(){var e={version:"0.1",_COOKIEHASH:null,_mouseOn:false,_conf:typeof QNR!="undefined"&&QNR.UserStatusConfig?QNR.UserStatusConfig:{},$:function(e){return document.getElementById(e)},_cookie:function(e){if(!this._COOKIEHASH){this._COOKIEHASH={};var t=document.cookie.split(";");for(var n=0;n<t.length;n++){var r=t[n];var i=r.split("=");if(r.indexOf("=")!=-1)this._COOKIEHASH[this._trim(i[0])]=this._trim(i[1])}}return this._COOKIEHASH[e]},_trim:function(e){if(String.prototype.trim){return e.trim()}return e.replace(/^\s+/,"").replace(/\s+$/,"")},islogin:function(){if(this._cookie("_t")&&this._cookie("_q")&&this._cookie("_q").indexOf("G.")<0){return true}else if("1"===this._cookie("QN16")){return true}else{return false}},_getinfo:function(){var e={from:window.__qunarglobal_from||""};var t="";var n="";var r=this._cookie("QN16");var i=this._cookie("QN21");var s=this._cookie("QN15");var o=this._cookie("QN42");if(typeof r!=="undefined"){switch(r){case"1":t=o;n=o;break;case"0":t=i;n=s;break;default:t=o;n=this._getQunarUserName()}}else{t=o;n=this._getQunarUserName()}e["displayName"]=decodeURIComponent(t).replace(/\"/g,"");e["username"]=decodeURIComponent(n).replace(/\"/g,"");this._console(t);return e},_getQunarUserName:function(){var e="";var t=this._cookie("_q");var n=this._cookie("_a");if(t){if(n){e=this._trim(t.replace("U.","")+"(未激活)")}else{e=this._trim(t.replace("U.",""))}}return e},_console:function(){if(typeof console!="undefined"&&console.info){var e=[];for(var t=0;t<arguments.length;t++)e.push(arguments[t]);console.info(e.join(" "))}},render:function(){this._creatStyle();if(!this._conf||!this._conf.id){this._console("no userstatus id, render by document.write");document.write(this._creatHTML());this._complate();return}var e=this.$(this._conf.id);if(!e){this._console("can't find the element \"",this._conf.id,'"');return}e.innerHTML=this._creatHTML();this._complate();return},_complate:function(){var e=this;this._regEvent();if(this._conf.complate){setTimeout(function(){e._conf.complate()},0)}},_creatStyle:function(){var e=document.createElement("style");e.type="text/css";var t="			.myMenuHide__ { display:none; }			.qn_header .myMenuList__ { background:#fff; border:1px solid #666; position:absolute; right:126px; text-align:left; top:-3px; width:69px; } 			.qn_header .qaccess a.myMenuLink__ { padding-right:9px; position:relative; }			.qn_header .qaccess a.myMenuLink__:hover { color:#000 !important; } 			.qn_header .myMenuList__ .top { border-bottom:1px solid #666; height:21px; } 			.qn_header .myMenuList__ li a { color:#555; display:block; height:21px; line-height:21px; padding-left:5px; } 			.qn_header .myMenuList__ li a:hover { background:#4878da; color:#fff !important; }			";if(e.styleSheet){e.styleSheet.cssText=t}else{e.appendChild(document.createTextNode(t))}document.getElementsByTagName("head")[0].appendChild(e)},_creatHTML:function(){var e=[];var t=this._getinfo();var n=encodeURIComponent(window.location.href.replace(/([\u4e00-\u9fa5]+)/g,function(e,t){return encodeURIComponent(t)}));if(this.islogin()){var r=this._creaHtmlEx();e.push(r);e.push('<a href="//user.qunar.com/index.jsp#basic">',t.displayName,"</a> | ");var i=this._conf.title;var s=this._conf.list;if(i){e.push('<a href="//travel.qunar.com/space/?book#js_book#1"  hidefocus="on" class="myMenuLink__" id="__myMenuTitle__">',i);if(s){e.push('<img src="//source.qunarzz.com/site/images/new_main/new_qunar/icons/icon.my.gif" class="da" />')}e.push("</a> | ")}e.push('<a href="//user.qunar.com/logout.jsp?ret=',n,'">退出</a>')}else{e.push('<a href="//user.qunar.com/login.jsp?ret=',n,'">登录</a> | <a href="//user.qunar.com/reg.jsp?ret=',n,'">注册</a>')}return e.join("")},_creaHtmlEx:function(){var e=this._conf.list;var t=this._getinfo();if(typeof this._conf.creatEx==="function"){return this._conf.creatEx.call(this)}if(e&&e.length>0){var n=[];n.push('<div id="__myMenuInfo__" class="myMenuList__ myMenuHide__">');n.push('	<div class="top"></div>');n.push('	<div class="menu">');n.push("		<ul>");for(var r=0;r<e.length;r++){var i=e[r].link;var s=e[r].text;n.push('<li><a href="',i.replace(/#{username}/g,t.username),'">',s,"</a></li>")}n.push("		</ul>");n.push("	</div>");n.push("</div>");return n.join("")}else{return""}},showEx:function(){var e=this.$("__myMenuInfo__");if(e&&!this._mouseOn){this.removeCss(e,"myMenuHide__")}this._mouseOn=true},hideEx:function(){var e=this.$("__myMenuInfo__");if(e){this.addCss(e,"myMenuHide__")}this._mouseOn=false},addCss:function(e,t){if(!e)return;if(e.className!=""){if(e.className.indexOf(t)>-1){e.className=e.className}else{e.className=[e.className," ",t].join("")}}else{e.className=t}},removeCss:function(e,t){if(!e)return;var n="";var r=e.className.split(" ");for(var i=0;i<r.length;i++){if(r[i]!=t){if(i>0){n+=" "}n+=r[i]}}e.className=n},stopEvent:function(e){if(!e)e=window.event;if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}},mouseout_x:function(e){var t=e||window.event;var n=t.toElement||t.relatedTarget;var r=this.$("__myMenuInfo__");if(!n){this.hideEx();return}if(r.contains){if(!r.contains(n)&&n.className.indexOf("my")<0){this.hideEx()}}else if(r.compareDocumentPosition){var i=r.compareDocumentPosition(n);if(!(i==20||i==0)&&n.className.indexOf("my")<0){this.hideEx()}}else{this._console("element has no contains and compareDocumentPosition");this.hideEx()}},_regEvent:function(){},_bind:function(e,t,n){if(e){if(e&&e.attachEvent){e.attachEvent("on"+t,function(e){n(e)})}else{e.addEventListener(t,function(e){n(e)},false)}}}};e.render();this.getUserName=function(){var t=e._getinfo();return t?t.displayName:""}})()}(t.exports,t,e);e.____MODULES["67e7812dffaeb4f7dd1863a4d34f02cb"]=t.exports})(this);(function(e){var t={id:"4bf36c2ecbc53f814292221018719f45",filename:"QNR.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){(function(e){var t=e,n;if(typeof t.QNR==="undefined"){n=t.QNR={}}else{n=t.QNR}if(n._TRAVEL_INIT_){return}n._TRAVEL_INIT_=true;var r=t.document,i=Object.prototype,s=Array.prototype,o=i.toString,u=i.hasOwnProperty,a=/^\s+/,f=/\s+$/;var l={map:function(e,t,n){var r=e.length;var i=new Array(r);for(var s=0;s<r;s++){if(s in e){i[s]=t.call(n,e[s],s,e)}}return i},forEach:function(e,t,n){for(var r=0,i=e.length;r<i;r++){if(r in e){t.call(n,e[r],r,e)}}},filter:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++){if(i in e&&t.call(n,e[i],i,e)){r.push(e[i])}}return r},some:function(e,t,n){for(var r=0,i=e.length;r<i;r++){if(r in e&&t.call(n,e[r],r,e)){return true}}return false},every:function(e,t,n){for(var r=0,i=e.length;r<i;r++){if(r in e&&!t.call(n,e[r],r,e)){return false}}return true},indexOf:function(e,t,n){var r=e.length;n|=0;if(n<0){n+=r}if(n<0){n=0}for(;n<r;n++){if(n in e&&e[n]===t){return n}}return-1},lastIndexOf:function(e,t,n){var r=e.length;n|=0;if(!n||n>=r){n=r-1}if(n<0){n+=r}for(;n>-1;n--){if(n in e&&e[n]===t){return n}}return-1},contains:function(e,t){return l.indexOf(e,t)>=0},clear:function(e){e.length=0},remove:function(e,t){var n=-1;for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s=0;s<e.length;s++){if(i===e[s]){if(n<0){n=s}e.splice(s--,1)}}}return n},unique:function(e){var t=[],n=null,r=Array.indexOf||l.indexOf;for(var i=0,s=e.length;i<s;i++){if(r(t,n=e[i])<0){t.push(n)}}return t},reduce:function(e,t,n){var r=e.length;var i=0;if(arguments.length<3){var s=0;for(;i<r;i++){if(i in e){n=e[i++];s=1;break}}if(!s){throw new Error("No component to reduce")}}for(;i<r;i++){if(i in e){n=t(n,e[i],i,e)}}return n},reduceRight:function(e,t,n){var r=e.length;var i=r-1;if(arguments.length<3){var s=0;for(;i>-1;i--){if(i in e){n=e[i--];s=1;break}}if(!s){throw new Error("No component to reduceRight")}}for(;i>-1;i--){if(i in e){n=t(n,e[i],i,e)}}return n},expand:function(e){return[].concat.apply([],e)},toArray:function(e){var t=[];for(var n=0;n<e.length;n++){t[n]=e[n]}return t},wrap:function(e,t){return new t(e)}};for(var c in l){(function(e){if(!s.hasOwnProperty(e)){n[e]=l[e];s[e]=function(){var t=this;return l[e].apply(null,[t].concat([].slice.call(arguments,0)))}}else{n[e]=function(){var t=s.slice.call(arguments,0);var n=t.splice(0,1)[0];return s[e].apply(n,t)}}})(c)}for(var h in l){(function(e){if(!s.hasOwnProperty(e)){s[e]=raiders.helper.methodize(l[e])}})(h)}var p=n.forEach,d=n.some,v=n.indexOf;var m=function(e){var t=e.toString();if(t.trim){return t.trim()}else{return t.replace(a,"").replace(f,"")}};var g={};p("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){g["[object "+e+"]"]=e.toLowerCase()},g);var y=function(e){return e==null?String(e):g[o.call(e)]||"object"};var b=function(e){return y(e)==="function"};var w=Array.isArray||function(e){return y(e)==="array"};var E=function(e){return e&&typeof e==="object"&&"setInterval"in e};var S=function(e,t){var n=s.slice.call(arguments,2);return function(){var r=s.slice.call(arguments,0);r=n.concat(r);if(b(e)){return e.apply(t,r)}else{return function(){console.error("proxy func is  not function")}}}};var x=function(){this._eventList={}};x.prototype={constructor:x,_getOne:function(e){return this._eventList[e]||(this._eventList[e]=[])},bind:function(e,t,n){if(y(e)==="object"){for(var r in e){this.bind(r,e[r],n)}}else{if(n){t=S(t,n)}var i=this._getOne(e);if(i.fired){t(i.args);return this}this._getOne(e).push(t);return this}},unbind:function(e,t){var n=this._getOne(e);if(t){var r=v(n,t);if(r>-1){n.splice(r,1)}}else{n.length=0}},trigger:function(e){var t=this._getOne(e)||[];var n=s.slice.call(arguments,1);var r=this;var i;p(this._getOne(e),function(e){i=e.apply(r,n);if(i===false)return true});return i},once:function(e,t,n){var r=this;var i=function(){t.apply(n||r,arguments);r.unbind(e,i)};r.bind(e,i);return i},delay:function(e,t){var n=s.slice.call(arguments,2);var r=this;return setTimeout(function(){r.trigger.apply(r,e.concat(n))},t||10)},triggerReady:function(e){var t=this._getOne(e);var n=s.slice.call(arguments,1);p(t,function(e,t){if(typeof e!="function"){return null}return e.apply(null,n)});t.fired=true;t.args=n}};x.prototype.fire=x.prototype.trigger;x.prototype.on=x.prototype.bind;var T=function(e,t,n){var r=function(){};r.prototype=t.prototype;var i=e.prototype;e.prototype=new r;e.prototype.constructor=e;e.$super=t;N(e.prototype,i,n,true);return e};var N=function(e){var t=arguments.length;var n=false;var r=s.slice.call(arguments,1,t);if(y(arguments[t-1])==="boolean"){n=arguments[t-1];r=s.slice.call(arguments,1,t-1)}p(r,function(t){for(var r in t){if(y(e[r])==="undefined"||n){e[r]=t[r]}}});return e};N(n,{_config:{debug:true},type:y,trim:m,extend:T,mix:N,proxy:S,Event:x,isFunction:b,isArray:w,isWindow:E,isEmpty:function(e){if(w(e)||y(e)==="string"){return e.length===0}for(var t in e)if(u.call(e,t)){return false}return true},HTMLEncode:function(e){var t=r.createElement("div");t.appendChild(r.createTextNode(e||""));return t.innerHTML},HTMLDecode:function(e){var t=r.createElement("div");t.innerHTML=e||"";return t.innerText||t.textContent},countStr:function(e){var t=0;for(var n=0,r=e.length;n<r;n++){if(e.charCodeAt(n)>128){t++}else{t+=.5}}return t},subStr:function(e,t,n){if(!e)return"";var r=0,i=false,s=[];for(var o=0,u=e.length;o<u;o++){e.charCodeAt(o)>127?r+=1:r+=.5;if(r>t){i=true;break}s.push(e.charAt(o))}return s.join("")+(i?typeof n!=="undefined"?n:"...":"")},getHashParams:function(){var t=e.location.hash||"#",n={};var r=t.replace(/.*?#.*?!/,"");p(r.split("&"),function(e){var t=e.split("=");n[t[0]]=t[1]});return n},formatDate:function(e,t){t=t||"yyyy-MM-dd";var n=e.getFullYear().toString(),r={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};t=t.replace(/(y+)/ig,function(e,t){return n.substr(4-Math.min(4,t.length))});for(var i in r){t=t.replace(new RegExp("("+i+"+)","g"),function(e,t){return r[i]<10&&t.length>1?"0"+r[i]:r[i]})}return t},plusDay:function(e,t){var n=24*60*60*1e3;return new Date(e.getTime()+t*n)}});n.namespace=function(e,t){if(!e||!e.length){return null}var n=e.split(".");var r=n[0]=="QNR"?1:0;var i=n.length;var s=this;for(;r<i;r++){if(y(s[n[r]])==="undefined"){s[n[r]]={}}s=s[n[r]]}if(b(t)){t.call(s,this)}return s};(function(t){function E(e){if(b[e]){return b[e]["status"]||null}return null}function x(e){for(var t in e){return false}return true}var n={};var i={};var s=[];var o=[];var u;var a=function(e){if(/^\/\/\/?/.test(e)){e=location.protocol+e}return e};var f=function(){var e=r.getElementsByTagName("link"),t=e.length,i;while(t){i=e[--t];if((i.rel=="stylesheet"||i.type=="text/css")&&i.href){n[a(i.href)]=true}}e=r.getElementsByTagName("script");t=e.length;while(t){i=e[--t];if((!i.type||i.type=="text/javascript")&&i.src){n[a(i.src)]=true}}f=function(){}};var l=function(e){var r=s,o,u;delete i[e];n[e]=true;for(u=0;u<r.length;u++){o=r[u];delete o.resources[e];if(t.isEmpty(o.resources)){o.callback&&o.callback();r.splice(u--,1)}}};var c=function(){var e=r.styleSheets,t=e.length,n=o;while(t--){var i=e[t],s=i.ownerNode||i.owningElement,a=n.length;if(s){while(a--){if(s==n[a]){l(n[a]["data-href"]);n.splice(a,1)}}}}if(!n.length){clearInterval(u);u=null}};var h=function(e){var t=r.createElement("script");var n=function(){t.onload=t.onerror=t.onreadystatechange=null;l(e)};N(t,{type:"text/javascript",src:e},true);t.onload=t.onerror=n;t.onreadystatechange=function(){var e=this.readyState;if(e=="complete"||e=="loaded"){n()}};r.getElementsByTagName("head")[0].appendChild(t)};var d=function(e){var t=r.createElement("link");N(t,{type:"text/css",rel:"stylesheet",href:e,"data-href":e},true);r.getElementsByTagName("head")[0].appendChild(t);if(t.attachEvent){var n=function(){l(e)};t.onload=n}else{o.push(t);if(!u){u=setInterval(c,20)}}};var v=function(e,t){var r={},o,u,c,p;f();e=w(e)?e:[e];for(var v=0,m=e.length;v<m;v++){o=a(e[v]);r[o]=true;if(n[o]){setTimeout(S(l,null,o),0)}else if(!i[o]){i[o]=true;if(o.match(/[\?\.]css$/)){d(o)}else{h(o)}}}if(t){s.push({resources:r,callback:t})}};t.loadJS=function(e,t){v(e,t)};t.loadCSS=function(e,t){v(e,t)};t.loadListJs=t.loadSource=function(e,t){v(e,t)};var m="LOADING",g="LOADED";var b={};t.loadModule=function(n,r,i){var s=i||e.QZZ_TRAVEL_MODULES;if(!s){console.error("没有SRC的配置项");return}if(E(n)===g){var o=b[n]["callbacks"];var u;while(u=o.shift()){y(u)==="function"&&u()}y(r)==="function"&&r();return}var a=s[n],f,l={};if(y(a)==="string"){f=[a]}else if(y(a)==="array"){f=a}else if(y(a)==="object"){f=a.src;var c=a.depends;if(y(c)==="array"){p(c,function(e){l[e]=e})}else if(y(c)==="string"){l[c]=c}}else{console.error("需要加载的M格式错误 。。",n,a);return}var h=function(){if(!b[n]){b[n]={status:m,callbacks:[]};if(y(r)==="function"){b[n]["callbacks"].push(r)}}else if(E(n)===m){r&&b[n]["callbacks"].push(r);if(y(r)==="function"){b[n]["callbacks"].push(r)}return}t.loadSource(f,function(){b[n]["status"]=g;var e=b[n]["callbacks"];var t;while(t=e.shift()){y(t)==="function"&&t()}})};if(!x(l)){for(var d in l){(function(e){t.loadModule(e,function(){delete l[e];if(x(l)){h()}},s)})(d)}}else{h()}};})(n);var C=e.navigator.userAgent.toLowerCase(),k=function(e){return e.test(C)};var L=k(/opera/),A=k(/\bchrome\b/),O=k(/webkit/),M=!A&&O,_=k(/msie/)&&r.all&&!L,D=k(/msie 7/),P=k(/msie 8/),H=k(/msie 9/),B=k(/msie 10/),j=_&&!D&&!P&&!H&&!B,F=k(/trident/)&&C.match(/rv:([\d.]+)/)?true:false,I=k(/gecko/)&&!O,q=k(/mac/);n.Browser={isOpera:L,isChrome:A,isWebKit:O,isSafari:M,isIE:_,isIE7:D,isIE8:P,isIE9:H,isIE6:j,isIE11:F,isGecko:I,isMac:q};n.clickLog=function(e,t){var n=new Image;n.width=1;n.height=1;n.src="//bc.qunar.com/clk?s="+e+"&a="+t+"&t="+Math.random()};n.DEBUG=false;if(!e.console){e.console={log:function(){},error:function(){},info:function(){}}}t.QN=t.QNR;if(typeof define==="function"){define("lib/QNR",n);if(e.seajs)seajs.use("lib/QNR")}n.PubSub=new n.Event})(window);t.exports=QNR}(t.exports,t,e);e.____MODULES["4bf36c2ecbc53f814292221018719f45"]=t.exports})(this);(function(e){var t={id:"2a65ea94c2b49824e7e8a17b5f2548d4",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){n.exports=e.____MODULES["4bf36c2ecbc53f814292221018719f45"]}(t.exports,t,e);e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"]=t.exports})(this);(function(e){var t={id:"9f7da0fd7ad3ca7bfc636e2365d14ec5",filename:"Event.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=i.Event,o=[].slice;var u=function(){u.$super.apply(this,arguments)};i.extend(u,s,{bind:function(e,t,n){if(i.type(e)==="object"){var r=[];for(var s in e){r.push(this.bind(s,e[s],n))}return r}else{if(n){t=i.proxy(t,n)}var o=this._getOne(e);if(o.fired){t.apply(null,t.args);delete o.fired;delete o.args;return t}this._getOne(e).push(t);return t}},trigger:function(e){var t=this._getOne(e)||[];var n=o.call(arguments,1);var r=this;var i=t.map(function(e){return e.apply(r,n)});return i},triggerReady:function(e){var t=this._getOne(e);var n=o.call(arguments,1);t.forEach(function(e,t){if(typeof e!="function"){return null}return e.apply(null,n)});t.fired=true;t.args=n}});u.prototype.fire=u.prototype.trigger;n.exports=u}(t.exports,t,e);e.____MODULES["9f7da0fd7ad3ca7bfc636e2365d14ec5"]=t.exports})(this);(function(e){var t={id:"a095de22ed4d682bf11f9da6451a2556",filename:"Observer.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=e.____MODULES["9f7da0fd7ad3ca7bfc636e2365d14ec5"];var o=new s;n.exports=o}(t.exports,t,e);e.____MODULES["a095de22ed4d682bf11f9da6451a2556"]=t.exports})(this);(function(e){var t={id:"aef633924a0fa77f0f39939c0bf845f7",filename:"utils.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=i.Browser;var o={};var u=["日","一","二","三","四","五","六"];var a=/(?:[A-Z])[^A-Z\s]*/g;var f=window.SID;var l={forEach:function(e,t,n){for(var r in e){if(e.hasOwnProperty(r)){t.call(n||e,e[r],r)}}},HTMLEncode:function(e){return(e||"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")},parseDate:function(e){var t=e.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) *$/);if(t&&t.length>3)return new Date(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10));t=e.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2})[\s\u00A0]+(\d{1,2}):(\d{1,2}):(\d{1,2}) *$/);if(t&&t.length>6)return new Date(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10));t=e.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2})[\s\u00A0]+(\d{1,2}):(\d{1,2}):(\d{1,2})\.(\d{1,9}) *$/);if(t&&t.length>7)return new Date(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10),parseInt(t[7],10))},cutString:function(e,t,n){if(e.length<=t){return e}n=n||"";return e.slice(0,t-n.length)+n},countStr:function(e){var t=0;for(var n=0,r=e.length;n<r;n++){if(e.charCodeAt(n)>128){t++}else{t+=.5}}return t},countStrByWord:function(e){return e.length},splitStr:function(e,t,n){if(!e)return"";var r=0,i=false,s=[];for(var o=0,u=e.length;o<u;o++){e.charCodeAt(o)>127?r+=1:r+=.5;if(r>t){i=true;break}s.push(e.charAt(o))}return s.join("")+(i?typeof n!=="undefined"?n:"...":"")},createId:function(e,t){if(!e){e="_tmp"}if(typeof o[e]!=="undefined"){return e+"_"+(t!=null?t:++o[e])}else{o[e]=0;return e+"_"+o[e]}},format:function(e,t){t=t||"yyyy-MM-dd";var n=e.getFullYear().toString(),r={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};t=t.replace(/(y+)/ig,function(e,t){return n.substr(4-Math.min(4,t.length))});for(var i in r){t=t.replace(new RegExp("("+i+"+)","g"),function(e,t){return r[i]<10&&t.length>1?"0"+r[i]:r[i]})}return t},plusDay:function(e,t){var n=24*60*60*1e3;return new Date(e.getTime()+t*n)},minusDay:function(e,t){var n=24*60*60*1e3;return new Date(e.getTime()-t*n)},getWeekDay:function(e){return"星期"+u[e.getDay()]},aB2a_b:function(e){return e.replace(a,function(e){return"_"+e.toLowerCase()})},bindInput:function(){if(s.isIE9){return function(e,t){var n=null;var r;e.bind("focus.inp",function(){r=e.val();n=setInterval(function(){var n=e.val();if(n!==r){r=n;t.call(e,n)}},100);e.attr("inp_timer",n)}).bind("blur.inp",function(){r=null;if(n){clearInterval(n);n=null}var i=e.val();t.call(e,i)})}}else{return function(e,t){var n=function(){var n=e.val();t.call(e,n)};e.bind({"input.inp":n,"propertychange.inp":n})}}}(),fixImg:function(e,t){var n=e.width,r=e.height;var i=n/r;var s=t.width/t.height;var o,u;if(i>s){o=Math.min(t.height,r);u=o*i;e.style.marginLeft=-(u-t.width)/2+"px";e.style.marginTop=-(o-t.height)/2+"px"}else{u=Math.min(t.width,n);o=u/i;e.style.marginLeft=-(u-t.width)/2+"px";e.style.marginTop=-(o-t.height)/2+"px"}e.style.width=u+"px";e.style.height=o+"px";e.style.maxWidth="none"},imgLoad:function(e,t){if(e.complete){t.call(e);return}e.onload=onerror=function(){t.call(e)}},planBc:function(e){var t=encodeURIComponent;return function(n){n=t(n);var r=new Image;r.width=1;r.height=1;r.src="//bc.qunar.com/clk?s="+e+"&a="+n+"&t="+Math.random()}}(f),setCursorPos:function(){if(document.createRange){return function(e,t){e.selectionStart=t;e.selectionEnd=t}}else{return function(e,t){var n=e.createTextRange();n.moveStart("character",t);n.collapse();n.moveEnd("character",t);n.select()}}}()};n.exports=l}(t.exports,t,e);e.____MODULES["aef633924a0fa77f0f39939c0bf845f7"]=t.exports})(this);(function(e){var t={id:"41babe22ebb465e6e80fb775c91c4c90",filename:"Bc.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=e.____MODULES["aef633924a0fa77f0f39939c0bf845f7"];var o=s.planBc;$("body").delegate("*","mousedown",function(){var e=$(this).data("beacon");e&&o(e)});n.exports=o}(t.exports,t,e);e.____MODULES["41babe22ebb465e6e80fb775c91c4c90"]=t.exports})(this);(function(e){var t={id:"7f400bc39f0ba5be13acac4546ecdba1",filename:"dialog.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){var r=function(e,t,n){if(n.Dialog){return n.Dialog}var r=!!e.browser.msie,i=r&&e.browser.version==="6.0",s=e(t.document),o=e("body"),u=e(t);var a=16;var f=n.Browser.isMac;var l=false;e(function(){o=e("body")});var c='<div class="dlg_mask"></div>',h='<div class="g_dlg_box"></div>';var p="dlg",d=0,v=0,m=1e5;var g={content:"",maskVisible:true,top:0,left:0,width:0,height:0,newMask:false,contentStyle:"",borderStyle:"",titleStyle:"",closeCls:"",closeBtn:{handler:function(e){e.close()}},hideCloseBtn:false};var y=function(e,t){var n={},r;for(r in t){if(t.hasOwnProperty(r)){n[r]=typeof e[r]!=="undefined"?e[r]:t[r]}}return n};var b=function(){var e=u;return{scrollTop:s.scrollTop(),scrollLeft:s.scrollLeft(),width:e.width(),height:e.height()}};var w="dlg_mask_";var E=function(){this.id=w+ ++d;this._dom=e('<div id="'+this.id+'" class="dlg_mask" style="z-index:'+ ++m+'"></div>');this._init()};E.prototype={_init:function(){o.append(this._dom);this._dom.hide();this._initEvents();this.adaptWin();if(this._needIframe()||true){this._createIframe()}},_initEvents:function(){var e=this},_createIframe:function(){this._iframe=e('<iframe class="dlg_miframe" frameborder="0" src="about:blank"></iframe>');this._dom.append(this._iframe)},addClass:function(e){this._dom.addClass(e)},_needIframe:function(){var n=!!t.ActiveXObject&&(i&&e("select").length||e("object").length);return n},adaptWin:function(){if(i){this._dom.css({top:s.scrollTop(),left:s.scrollLeft(),height:u.height(),width:u.width()})}},hide:function(){this._dom.hide();var t=e("html").css("overflow","");if(f==false){if(l){t.css("padding-right","0px")}}},show:function(){var t=this;var n=u.width();var r=e("html").css("overflow","hidden");var i=u.width();t._dom.show();if(f==false){if(n!=i){l=true;r.css("padding-right",a+"px")}}},getDom:function(){return this._dom},remove:function(){this._dom.remove()}};var S;var x=function(e){var t=e||{};this.config=y(t,g);this._init()};x.prototype={constructor:x,_init:function(){if(!this.config){return}this.id=p+ ++v;var e=this.config;if(e.newMask){this._mask=new E}else{if(!S){S=new E;this._mask=S}else{this._mask=S}}this._creatDialog();this._initEvents();this.inited=true},_initEvents:function(){function n(){if(i){e._dlg_container.css({top:s.scrollTop(),left:s.scrollLeft(),width:u.width(),height:u.height()})}else{e._dlg_container.css({width:u.width(),height:u.height()})}e.toCenter();e._mask.adaptWin()}var e=this,t=this.id;this._closeBtn.bind({click:function(t){t.preventDefault();e.config.closeBtn.handler.call(e,e)}});u.bind("resize."+t,n);e._unbindEvents=function(){u.unbind("resize."+t)};},_creatDialog:function(){var t=this.config;var n=this._dlg_container=e(h).attr("id",this.id).css("z-index",m+=10);if(t.content instanceof e){this._dialog=t.content}else{this._dialog=e(t.content)}var r=this._dialog;r.addClass("g_dlg_wrap_css3");n.html(r);this._content=e(".js_content",r);this._closeBtn=e(".js_close",r);o.append(n);if(t.hideCloseBtn){this._closeBtn.hide()}var a="fixed";if(i){n.css({top:s.scrollTop(),left:s.scrollLeft(),width:u.width(),height:u.height()});a="absoulte"}else{n.css({width:u.width(),height:u.height()})}r.css("position","absolute");this.setPos(a)},setPos:function(e){this._dlg_container.css("position",e)},getContainer:function(){return this._dlg_container},getContent:function(){return this._content},setContent:function(e){this._content.empty();this._content.html(e)},getCloseBtn:function(){return this._closeBtn},_setStyle:function(e,t){if(typeof t=="string"){if(r){e[0].style.cssText=t}else{e.attr("style",t)}}else{e.css(t)}},toCenter:function(){var e=b(),t=this._dialog.width(),n=this._dialog.height(),r=0,s=0;var o=Math.max(e.height/2-n/2>>0+r,0);var u=e.width/2-t/2>>0+s;if(i){u-=a/2}var f={left:u,top:o};this._dialog.css(f);return this},show:function(e,t){var n=this;if(n.config.maskVisible){n._mask.show()}n._dlg_container.css({width:u.width(),height:u.height()});n._dlg_container.show();n.toCenter();if(e){e.call(t||n,n)}n.showed=true;return this},close:function(e,t){var n=this;this._mask.hide();this._dlg_container.hide();if(e){e.call(t||n,n)}this.showed=false;return this},destory:function(){this.close();this._unbindEvents();this.config.newMask&&this._mask.remove();this._dlg_container.remove();this._dialog.remove();for(var e in this){delete this[e]}},getMask:function(){return this._mask}};x.prototype.In=x.prototype.show;x.prototype.out=x.prototype.close;x.prototype.hide=x.prototype.close;x.prototype.remove=x.prototype.destory;n.Dialog=x;n.popMsg=function(t){var n=new x({maskVisible:false,newMask:true,content:['<div class="pop_msg" style="position:relative;" ><table><tr><td>',t,'</td></tr></table><i class="js_close" style="position:absolute;width:16px;height:20px;right:5px;top:5px;"></i></div>'].join(""),closeBtn:{handler:function(e){if(i){clearTimeout(i)}e.remove()}}});n.show();var r=e("html").css("overflow");var i=setTimeout(function(){n.remove();e("html").css({overflow:r})},1500)};return x}(jQuery,window,QNR);t.exports=r}(t.exports,t,e);e.____MODULES["7f400bc39f0ba5be13acac4546ecdba1"]=t.exports})(this);(function(e){var t={id:"9107c28b5689cd09e17d4039d9133542",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var i=e.____MODULES["7f400bc39f0ba5be13acac4546ecdba1"];n.exports=i}(t.exports,t,e);e.____MODULES["9107c28b5689cd09e17d4039d9133542"]=t.exports})(this);(function(e){var t={id:"7a7b763f57a38c2f1efb532a7007aaea",filename:"Storage.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){var r=function(e,t){if(e.Storage){return e.Storage}var n={_store:null,_getStore:function(){if(this._store){return this._store}if(!!t.localStorage){this._store=r}else{this._store=i}return this._store},isAvailable:function(){return!!this._getStore()},setItem:function(e,t){var n=this._getStore();return n&&n.setItem(e,t)},getItem:function(e){var t=this._getStore();return t&&t.getItem(e)},removeItem:function(e){var t=this._getStore();return t&&t.removeItem(e)},clear:function(){var e=this._getStore();e&&e.clear()},onstorage:function(e,t){var n=this._getStore();n&&n.onstorage(e,t)},sync:function(t,r,i,s){if(!e.isFunction(t))return false;var o=this._genSyncKey(t);var u="~{##}~";var a="~{###}~";var f=false;this.onstorage(s||o,function(e){if(!f||!n.isStoreTriggerSelf()){try{var i=e.split(u)[1],s=i.split(a);t.apply(r,s)}catch(o){console.log("sync event error",e)}}f=false});var l=this;return function(){if(!i){t.apply(r,arguments)}f=true;l.setItem(s||o,new Date*1+""+Math.random()+u+[].slice.call(arguments).join(a))}},_genSyncKey:function(e){var t=30,e=e.toString();var n="",r=/^function\s+([^\(]+)\s*\(/ig,i=r.exec(e);if(i){n=i[1];n=n.replace(/[^\w]+/ig,"")}e=e.replace(/(function|[^\w]+)/ig,"");t-=n.length;if(t<=0){return n.substring(0,30)}if(e.length<=t){return n+e}var s=t,o=e.length,u=Math.ceil(e.length/t),a=[];for(var f=0;f<e.length;f+=u){a.push(e.substring(f,f+1));s--;o-=u;if(o<=s){a.push(e.substring(f));break}}return n+a.join("")},isStoreUseTimer:function(){return this._getStore().useTimer},isStoreTriggerSelf:function(){return this._getStore().triggerSelf},getStoreInterval:function(){return this._getStore().interval}};var r=function(){function r(e,r){var i=n[e];return function(s){setTimeout(function(){s=s||t.storageEvent;var o=s.key,u=s.newValue;if(!o){var a=n[e];if(a!=i){o=e;u=a}}if(o==e){r&&r(u);i=u}},0)}}var n=t.localStorage;return{getItem:function(e){return n.getItem(e)},setItem:function(e,t){return n.setItem(e,t)},removeItem:function(e,t){return n.removeItem(e)},clear:function(){return n.clear()},onstorage:function(n,i){var s=e.Browser;if(!this.useTimer){if(document.attachEvent&&!s.isOpera){document.attachEvent("onstorage",r(n,i))}else{t.addEventListener("storage",r(n,i),false)}}else{var o=r(n,i);setInterval(function(){o({})},this.interval)}},useTimer:e.Browser.isIE6||e.Browser.isIE9||e.Browser.isChrome,triggerSelf:e.Browser.isIE||e.Browser.isChrome||e.Browser.isIE11,interval:1e3}}();var i=function(){function t(e,t){var n=i.getItem(e);return function(){var r=i.getItem(e);if(n!=r){t&&t(r);n=r}}}var e="testlocal_storage";return{_store:null,_getStore:function(){if(!this._store){try{this._store=document.createElement("input");this._store.type="hidden";this._store.addBehavior("#default#userData");document.body.appendChild(this._store)}catch(e){var t=[];for(var n in e){t.push(n+": "+e[n])}document.title=t.join("\n");return false}}return this._store},getItem:function(t){var n=this._getStore();if(!n)return false;n.load(e);return n.getAttribute(t)},setItem:function(t,n){var r=this._getStore();if(!r)return false;r.load(e);r.setAttribute(t,n);r.save(e)},removeItem:function(t,n){var r=this._getStore();if(!r)return false;r.load(e);r.removeAttribute(t);r.save(e)},clear:function(){var t=this._getStore();if(!t)return false;var n=t.XMLDocument;var r=n.selectSingleNode("ROOTSTUB");for(var i=0;i<r.attributes.length;++i){var s=r.attributes[i];t.removeAttribute(s.baseName)}t.save(e)},onstorage:function(e,n){var r=t(e,n);setInterval(function(){r()},this.interval)},isAvailable:function(){try{var e=this._getStore();if(!e)return false;e.save();return true}catch(t){if(t.number&&Math.abs(parseInt(t.number))==2146827838){return true}if(t.description&&(t.description.indexOf("Wrong number")!=-1||t.description.indexOf("错误的参数个数")!=-1)){return true}return false}},useTimer:true,interval:1e3,triggerSelf:true}}();e.Storage=n;return n}(QNR,window);t.exports=r}(t.exports,t,e);e.____MODULES["7a7b763f57a38c2f1efb532a7007aaea"]=t.exports})(this);(function(e){var t={id:"4f04804537728a786fda904b6a7d8ac4",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["7a7b763f57a38c2f1efb532a7007aaea"];n.exports=i}(t.exports,t,e);e.____MODULES["4f04804537728a786fda904b6a7d8ac4"]=t.exports})(this);(function(e){var t={id:"c51777e35917abcb15bcf62b870b9df9",filename:"msg_box.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){var r=$('<div class="msg_info_box hide" id="msg_info_box"><div class="msg_info_box_inner"><div class="msg_content"><img src="//source.qunarzz.com/site/images/travel/new_plan/tan.gif"><span></span></div></div></div>');var i=r.find(".msg_content span");$("body").append(r);var s;t.exports={showInfo:function(e,t){if(s){clearTimeout(s);s=null}i.text(e);r.height(84).show();if(t){this.hideInfo(3e3)}},hideInfo:function(e){if(s){clearTimeout(s)}if(!r.is(":visible")){return}s=setTimeout(function(){r.animate({height:0},{speed:1e3,complete:function(){r.hide()}})},e||0)}}}(t.exports,t,e);e.____MODULES["c51777e35917abcb15bcf62b870b9df9"]=t.exports})(this);(function(__context){var module={id:"9cab0f225703746b5f45fa641e54f68a",filename:"json2.js",exports:{}};if(!__context.____MODULES){__context.____MODULES={}}var r=function(exports,module,global){if(!window.JSON){window.JSON={}}(function(JSON){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];if(a&&typeof a==="object"&&typeof a.toJSON==="function"){a=a.toJSON(e)}if(typeof rep==="function"){a=rep.call(t,e,a)}switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a){return"null"}gap+=indent;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1){u[n]=str(n,a)||"null"}i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]";gap=o;return i}if(rep&&typeof rep==="object"){s=rep.length;for(n=0;n<s;n+=1){if(typeof rep[n]==="string"){r=rep[n];i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}else{for(r in a){if(Object.prototype.hasOwnProperty.call(a,r)){i=str(r,a);if(i){u.push(quote(r)+(gap?": ":":")+i)}}}}i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}";gap=o;return i}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(e,t,n){var r;gap="";indent="";if(typeof n==="number"){for(r=0;r<n;r+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i==="object"){for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){r=walk(i,n);if(r!==undefined){i[n]=r}else{delete i[n]}}}}return reviver.call(e,t,i)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})(JSON)}(module.exports,module,__context);__context.____MODULES["9cab0f225703746b5f45fa641e54f68a"]=module.exports})(this);(function(e){var t={id:"60f02d1516c54ca88306bd00b7b4d021",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){e.____MODULES["9cab0f225703746b5f45fa641e54f68a"]}(t.exports,t,e);e.____MODULES["60f02d1516c54ca88306bd00b7b4d021"]=t.exports})(this);(function(e){var t={id:"9e2717a0ddb552d5511cab6947bdfe87",filename:"PlanInfo.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=e.____MODULES["4f04804537728a786fda904b6a7d8ac4"];var o=e.____MODULES["c51777e35917abcb15bcf62b870b9df9"];var u=e.____MODULES["a095de22ed4d682bf11f9da6451a2556"];e.____MODULES["60f02d1516c54ca88306bd00b7b4d021"];var a=window.JSON;var f={name:"planinfo",data:null,max_city_len:20,init:function(){var e=this},get:function(e){return this.data&&this.data[e]||null},getData:function(){return this.data},getCityList:function(){return this.data&&this.data["citylist"]||null},getCityIds:function(){var e=this.getCityList();return e?i.map(e,function(e){return e.cityId}):[]},getCityLength:function(){return this.data&&this.data["citylist"]&&this.data["citylist"].length||0},getStartDate:function(){return this.data&&this.data["startdate"]||null},setStartDate:function(e){this.data=this.data||{};this.data["startdate"]=e;this.record()},setCityList:function(e){this.data["citylist"]=e||[];this.record()},updateCityByInd:function(e,t){var n=this.getCityList()[e];n=t;this.record()},addCity:function(e,t){this.data=this.data||{};this.data["citylist"]=this.data["citylist"]||[];var n=this.data["citylist"],r=this.max_city_len;if(n.length>=r){o.showInfo("最多添加"+r+"个城市");o.hideInfo(3e3);return false}this.data["citylist"].push(e);this.record();t&&t(e);u.trigger("city_change_success");return true},removeCityByInd:function(e){var t=this.getCityList();t.splice(e,1);this.record();u.trigger("city_change_success");return true},removeData:function(){this.data=null;this.record()},record:function(){},hasCityId:function(e){var t=this;var n=t.getCityList();if(!n){return}var r;for(var i=0;i<n.length;i++){if(n[i].i==e){r=i}}return r>=0},isFull:function(){if(this.getCityLength()>=this.max_city_len){return true}}};u.on("add_city",$.proxy(f.addCity,f));u.on("remove_city",$.proxy(f.removeCityByInd,f));u.on("city_change_success",function(){u.trigger("refresh_sel_status")});u.on("update_city_byind",$.proxy(f.updateCityByInd,f));n.exports=f}(t.exports,t,e);e.____MODULES["9e2717a0ddb552d5511cab6947bdfe87"]=t.exports})(this);(function(e){var t={id:"2848b63772f83d31654e510fd916c91a",filename:"Frame.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function a(){var e={height:u.height()-s+"px"};o.css(e);$(">.qn_left",this.dom).css(e);$(">.qn_right",this.dom).css(e)}var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=28;var o=$("#qn_main_box");var u=$(window);var f={init:function(){u.bind("resize",a);a()}};n.exports=f}(t.exports,t,e);e.____MODULES["2848b63772f83d31654e510fd916c91a"]=t.exports})(this);(function(e){var t={id:"5d72c671ecbc8d42a368571bd4664162",filename:"jquery.deleteinput.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){(function(e){e.fn.qdeleteinput=function(t){var n="qdeleteinput";var r=t&&t.customClass;this.each(function(t,i){function l(){if(e.trim(s.val())===""){a.hide()}else{a.show()}}var s=e(i);var o=s.parent("div"),u=e.trim(s.val()),a;var f={position:"absolute",top:"0",right:"0"};o.css({position:"relative"});a=e('<a href="javascript:;" class="input_empty">删除</a>');r?a.addClass(r):a.css(f);o.append(a);s.data("qdeleteinput",a);s.bind("focus."+n,l);s.bind("propertychange."+n,l);s.bind("change."+n,l);s.bind("keyup."+n,l);a.bind("click",function(){a.hide();s.val("").trigger("focus")});l.apply(s)});return this}})(jQuery)}(t.exports,t,e);e.____MODULES["5d72c671ecbc8d42a368571bd4664162"]=t.exports})(this);(function(e){var t={id:"ffa72cb41e9c72c97d9577d7c4202b4c",filename:"jquery.mousewheel.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){(function(e){e(jQuery)})(function(e){function o(t){var n=t||window.event,s=[].slice.call(arguments,1),o=0,u=0,a=0,f=0,l=0,c;t=e.event.fix(n);t.type="mousewheel";if(n.wheelDelta){o=n.wheelDelta}if(n.detail){o=n.detail*-1}if(n.deltaY){a=n.deltaY*-1;o=a}if(n.deltaX){u=n.deltaX;o=u*-1}if(n.wheelDeltaY!==undefined){a=n.wheelDeltaY}if(n.wheelDeltaX!==undefined){u=n.wheelDeltaX*-1}f=Math.abs(o);if(!r||f<r){r=f}l=Math.max(Math.abs(a),Math.abs(u));if(!i||l<i){i=l}c=o>0?"floor":"ceil";o=Math[c](o/r);u=Math[c](u/i);a=Math[c](a/i);s.unshift(t,o,u,a);return(e.event.dispatch||e.event.handle).apply(this,s)}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"];var n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];var r,i;if(e.event.fixHooks){for(var s=t.length;s;){e.event.fixHooks[t[--s]]=e.event.mouseHooks}}e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=n.length;e;){this.addEventListener(n[--e],o,false)}}else{this.onmousewheel=o}},teardown:function(){if(this.removeEventListener){for(var e=n.length;e;){this.removeEventListener(n[--e],o,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})}(t.exports,t,e);e.____MODULES["ffa72cb41e9c72c97d9577d7c4202b4c"]=t.exports})(this);(function(e){var t={id:"525e8dc17b8a8011c6f7f0bbe1f060c2",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){n.exports=e.____MODULES["ffa72cb41e9c72c97d9577d7c4202b4c"]}(t.exports,t,e);e.____MODULES["525e8dc17b8a8011c6f7f0bbe1f060c2"]=t.exports})(this);(function(e){var t={id:"edb44368d6da1ca32d60ffa026712ff5",filename:"jquery.placeholder.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){(function(e){e.fn.qplaceHolder=function(t){var n="qplaceholder";var r=t&&t.customClass;var i=t&&t.placeholder;var s=t&&t.allBrowser||false;var o;if(s){o=false}else{o=function(){return"placeholder"in document.createElement("input")}();if(o){return this}}this.each(function(t,s){function p(){if(e.trim(o.val())===""){l.show()}else{l.hide()}}var o=e(s);var u=o.parent("div"),a=i||o.attr("placeholder"),f=e.trim(o.val()),l;if(!a){return false}o.removeAttr("placeholder");var c=parseInt(o.css("line-height")||o.css("height")||0,10)+parseInt(o.css("padding-top")||0,10)+parseInt(o.css("padding-bottom")||0,10);var h={display:f===""?"block":"none",position:"absolute",left:parseInt(u.css("padding-left")||0,10)+parseInt(o.css("padding-left")||0,10),top:parseInt(u.css("padding-top")||0,10),height:c+"px","line-height":c+"px",color:"#999","font-size":"14px"};u.css({position:"relative"});l=a instanceof e?a:e("<span>"+a+"</span>");r?l.addClass(r):l.css(h);u.append(l);o.data("qplaceholder",l);o.bind("propertychange."+n,p);o.bind("change."+n,p);o.bind("blur."+n,p).bind("focus."+n,function(){l.hide()});l.bind("click."+n,function(){o.trigger("focus")});l.bind("focus."+n,function(){o.trigger("focus")})});return this}})(jQuery)}(t.exports,t,e);e.____MODULES["edb44368d6da1ca32d60ffa026712ff5"]=t.exports})(this);(function(e){var t={id:"18d3ab564076bc22d3dac77fc8da5ddd",filename:"QScroll-1.2.0.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){(function(e,t,n){var r=e(document),i=t.Math,s=t.parseInt,o=[].slice,u={}.toString;var a=25,f=20;var l="SHOW",c="HIDE",h="NO_SCROLL";var p='<div class="sliderbox" style="display:none">								<div style="height:50px;" class="slider"></div>					  </div>';var d="margin-top";var v=function(){var e="scroll_",t=0;return function(){var n=t++;return e+n}}();if(n.Browser.isMac){a=5}var m="linear";var g=function(t){n.Event.call(this);var r,s,o;this.id=v();r=t.win;if(r instanceof e){this.win=r}else{this.win=e(r)}if(e.type(t.slider)==="undefined"){s=e(p)}else if(t.slider instanceof e){s=t.slider}else{s=e(t.slider,this.win)}if(!t.slider){this._autoAddBar=true;this.win.append(s)}o=s.find(t.bar||".slider");this.slider=s;this.bar=o;this.content=t.content instanceof e?t.content:this.win.find(t.content);this.top_key=t.top_key||d;if(t.gap&&n.Browser.isMac){t.gap=i.ceil(t.gap/5)}this._gap=t.gap||a;this._offset_top=t.offsetTop||0;this._offset_bottom=t.offsetBottom||0;this._dontRelease=t.dontRelease||false;this._min_bar_height=40;this._precent=1;this._con_h=0;this._win_h=0;this._s_h=0;this._b_h=0;this._enabled=false;this._init(t)};var y={constructor:g,_init:function(e){var t=this;t.options=e;this._initWrapper();this._initEvents();if(e.events){for(var r in e.events){(function(e,r){if(n.isFunction(r)){t.on(e,r)}})(r,e.events[r])}}},_initWrapper:function(){},_initEvents:function(){var e=this,t=e.id,n=e.slider,s=e.bar,o=e._offset_top,u=e._offset_bottom;var a=null;e._show_timer=null;var f=0,l;e.win.bind("mouseenter."+t,function(t){e.enable()}).bind("mouseleave."+t,function(t){e._show_timer=setTimeout(function(){e.hide()},100)}).mousewheel(function(t,n,r,s){t.preventDefault();var o=n*e._gap;if(e._scrolling){f+=o;return}e._scrollBy(o,function(){if(i.abs(f)>0){e._scrollBy(f);f=0}})});n.mousedown(function(t){var n=t.pageY;var r=function(){var t=n-(s.offset().top+e._b_h/2);if(t===0){clearTimeout(a);a=null;return}if(i.abs(t)>=50){t=t>0?50:-50}e._moveBar(t);a=setTimeout(r,200)};r()}).mouseup(function(e){if(a){clearTimeout(a);a=null}});s.mousedown(function(n){n.stopPropagation();var i=n.pageX,o=n.pageY;s.css("cursor","pointer");r.bind("mousemove."+t,function(t){var n=t.pageY;var r=n-o;o=n;e._moveBar(r,true)});r.bind("mouseup."+t,function(e){r.unbind("mousemove."+t);s.css("cursor","")})})},_moveBar:function(e,t){if(this._status===h||!t&&this._scrolling){return}var n=this,r=n.bar,o=n.slider;var u=s(r.css("top"),10)||0;var a=(n._con_h-n._win_h)/(n._s_h-n._b_h);var f=i.max(i.min(u+e,n._s_h-n._b_h),0);var l=-i[e<0?"floor":"ceil"](e*a);var c=i.min(i.max((s(n.content.css(n.top_key),10)||0)+l,n._win_h-n._con_h),0);if(c===n._win_h-n._con_h){n._scollEnded();return}if(c===0){n._scrollZero()}if(t){n._scrolling=false;n.content.css(n.top_key,c);r.css("top",f);n.fire("scroll",-c,f,l,e,n);return}n._scrolling=true;n.bar.animate({top:f},{duration:150,easing:m,step:function(e){n.content.css(n.top_key,-e*a)},complete:function(){n._scrolling=false;n.fire("scroll",-c,f,l,e,n)}})},_initSize:function(){var e=this,t=e.win,n=e.content,r=e.slider,s=e.bar;if(!e._enabled){if(t.css("position")!=="relative"&&t.css("position")!=="absolute"){t.css({position:"relative",overflow:"hidden"})}if(e.top_key==="top"){n.css({position:"absolute",top:0,left:0})}e.slider.css({position:"absolute"});e.bar.css({position:"absolute",top:e._offset_top})}e._con_h=n.height();e._win_h=t.height();if(e._win_h>=e._con_h){this._status=h;this.content.css(this.top_key,0);this.slider.hide();this.bar.css("top",this._offset_top);return}this._status=l;if(!r.height()){r.height(e._win_h)}e._s_h=r.height()-e._offset_top-e._offset_bottom;e._b_h=i.floor(e._s_h*e._win_h/e._con_h);e._max_top=e._con_h-e._win_h;if(e._b_h<e._min_bar_height){e._precent=e._b_h/e._min_bar_height;e._b_h=e._min_bar_height}else{e._gap=e.options.gap||a;e._precent=1}s.height(e._b_h)},hasScrollBar:function(){return this._status!==h},_adjust:function(){var e=this,t=e.content,n=e.bar,r,o;r=s(e.content.css(e.top_key),10)||0;if(-r>e._max_top){r=-e._max_top;var u={};u[e.top_key]=r+"px";e.content.css(u)}o=i.max(i.abs(r)*(e._s_h-e._b_h)/(e._con_h-e._win_h),e._offset_top);n.css("top",o)},_statusChecker:function(){if(i.abs(s(this.content.css(this.top_key),10)||0)>=this._max_top){this.setScrollToEnd()}if(this.content.height()<=this.win.height()){this.setScrollByVal(0);this.setNoScroll()}},setScrollByVal:function(e){this.content.css(this.top_key,e)},_scrollBy:function(e,t){var n=this,r=n.win,o=n.content,u=n.slider,a=n.bar,f,l,c,p;if(n._scrolling){return}if(this._status===h){n._scollEnded();t&&t();return}f=s(o.css(n.top_key),10)||0;l=f+e;if(l<-n._max_top&&f===-n._max_top){n._scollEnded();t&&t();n._scrolling=false;return}if(l<-n._max_top){l=-n._max_top}else if(l>0){l=0}p=(n._s_h-n._b_h)/(n._con_h-n._win_h);c=i.min(i.abs(l)*p,n._s_h-n._b_h);c=i[e<0?"floor":"ceil"](c);var d=function(){if(t)t();n.fire("scroll",-l,c,e,c-(s(a.css("top"),10)||0),n);if(l<=-n._max_top){n._scollEnded()}if(l===0){n._scrollZero()}};var v={};n._scrolling=true;v[n.top_key]=l+"px";n.content.animate(v,{duration:100,easing:m,step:function(e){n.bar.css("top",-e*p)},complete:function(){n._scrolling=false;d()}})},_contentResize:function(){var e=this;e._initSize();e._adjust();e._statusChecker()},_scollEnded:function(){var e=this,t=e.content;e.fire("scroll_end")},_scrollZero:function(){this.fire("scroll_start")},scroll:function(e,t){this._scrollBy(e,t);this.scrollBarShowLogic()},scrollBarShowLogic:function(){if(this._status!==h){this.slider.show()}else{this.slider.hide()}},enable:function(){var e=this;if(!e._enabled){if(e._autoAddBar){e.slider.height(e.win.height())}e._initSize();e._enabled=true}if(e._show_timer){clearTimeout(e._show_timer);e._show_timer=null}e.show()},disable:function(){},reset:function(){this._contentResize();this.content.css(this.top_key,0);this.bar.css("top",this._offset_top)},show:function(){if(this._status!==h){this.slider.show()}},hide:function(){this.slider.hide()},setScrollToEnd:function(){var e=this.content;var t=e.height();var n=t-this.win.height();this.content.css(this.top_key,-n>0?0:-n)},setNoScroll:function(){this.hide();this._status=h},getContent:function(){return this.content},getSlider:function(){return this.slider},getWin:function(){return this.win},getBar:function(){return this.bar},remove:function(){var e=this,t=e.id;e.unbind();e.win.unbind("mouseenter."+t).unbind("mouseleave."+t).unmousewheel();e.slider.unbind();e.bar.unbind();if(e._autoAddBar){this.slider.remove()}for(var n in this){delete this[n]}}};y.setBarHeight=y._contentResize;e.extend(g.prototype,n.Event.prototype,y);n.ScrollBar=g})(jQuery,window,QNR)}(t.exports,t,e);e.____MODULES["18d3ab564076bc22d3dac77fc8da5ddd"]=t.exports})(this);(function(e){var t={id:"57fba5403d86ec71e90a9adf888fd38a",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){n.exports=e.____MODULES["18d3ab564076bc22d3dac77fc8da5ddd"]}(t.exports,t,e);e.____MODULES["57fba5403d86ec71e90a9adf888fd38a"]=t.exports})(this);(function(e){var t={id:"7bd7e9ffa60d61c55cd0706b21c43b9b",filename:"UserInfo.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=e.____MODULES["4f04804537728a786fda904b6a7d8ac4"];var o=function(e,t){function a(e){var t={};for(var n in r){t[n]=e[r[n]]||false}return t}function f(t){if(t){var n=JSON.parse(t);s=n;o=true}else{o=false;s=null}if(e.QUstatus&&e.QUstatus.render){e.QUstatus.render()}}function l(n){function r(){}t.ajax({url:"//travel.qunar.com/space/invite/getBind",dataType:"json",data:{csrfToken:e.UserInfo._getCookie("csrfToken")},cache:false,success:function(t){e.xxUserData=t;if(t.ret){var r=a(t.data||{});var i=JSON.stringify(r);f(i)}else{f()}if(e.type(n)==="function"){n()}u.triggerReady("get_user_info")},error:r})}var n;var r={qunar:"1",qq:"6",qq_weibo:"3",baidu:"7",sina:"2",renren:"4",kaixin:"5",douban:"8",tuan800:"9"};var i="q_usr";var s=null;var o=false;var u=e.PubSub;var f=e.Storage.sync(f,c);var c={getCoLogin:function(e){if(!e){return s}if(s){return s[e]||null}else{return null}},getUserId:function(){if(!this.isLogin()){return""}var t=this.getCoLogin("qunar");if(!t&&!e.isEmpty(s)){for(var n in s){if(s[n]){return s[n]}}return""}else{return t}},_getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));if(t!=null)return unescape(t[2]);return null},isLogin:function(){return this.isLoginQnr()||this.isLogin3rd()},isLoginQnr:function(){return!!(this._getCookie("_t")&&this._getCookie("_q")&&this._getCookie("_q").indexOf("G.")<0)},isLogin3rd:function(){var e=this._getCookie("QN16");return null!==e&&("1"===e||"0"===e)},reset:function(e){l(e)},getId:function(t){if(this.isLogin()){var n=this;u.once("get_user_info",function(){e.type(t)==="function"&&t(n.getUserId())})}else{this.getTempId(t)}},getUserData:function(t){u.once("get_user_info",function(){e.type(t)==="function"&&t(s)})},getTempId:function(e){var n=this._getCookie("tub");if(n){e(n)}else{t.get("/travelbook/commons/getTempUser",function(t){e(t)},"text")}},isQunarLogin:function(){return!!(this._getCookie("_t")&&this._getCookie("_q")&&this._getCookie("_q").indexOf("G.")<0)}};e.UserInfo=c;l(function(){var t=e.Storage;var n=c.getCoLogin();if(n){t.setItem("advice_userInfo",JSON.stringify(n))}else{t.setItem("advice_userInfo","")}});return c}(i,jQuery);n.exports=o}(t.exports,t,e);e.____MODULES["7bd7e9ffa60d61c55cd0706b21c43b9b"]=t.exports})(this);(function(e){var t={id:"37f5dc95563b072239718144ea54c801",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){e.____MODULES["60f02d1516c54ca88306bd00b7b4d021"];var i=e.____MODULES["7bd7e9ffa60d61c55cd0706b21c43b9b"];n.exports=i}(t.exports,t,e);e.____MODULES["37f5dc95563b072239718144ea54c801"]=t.exports})(this);(function(e){var t={id:"edb20c2042b670af16af04b9e354052a",filename:"jquery.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){t.exports=window.jQuery}(t.exports,t,e);e.____MODULES["edb20c2042b670af16af04b9e354052a"]=t.exports})(this);(function(e){var t={id:"24538986015918d4b562e397230af418",filename:"docCookies.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){var r=function(e){var t={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,r,i,s){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e)){return false}var o="";if(n){switch(n.constructor){case Number:o=n===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:o="; expires="+n;break;case Date:o="; expires="+n.toUTCString();break}}document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+o+(i?"; domain="+i:"")+(r?"; path="+r:"")+(s?"; secure":"");return true},removeItem:function(e,t,n){if(!e||!this.hasItem(e)){return false}document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:"");return true},hasItem:function(e){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var t=0;t<e.length;t++){e[t]=decodeURIComponent(e[t])}return e}};window.docCookies=t;return window.docCookies}();t.exports=r}(t.exports,t,e);e.____MODULES["24538986015918d4b562e397230af418"]=t.exports})(this);(function(e){var t={id:"88d5c499e26b6f8fc86d873910ae3aea",filename:"http.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function f(){console.log(arguments)}function l(e){var t=function(t){var r=[].slice.call(arguments,0);if(c(t)&&s.isFunction(n.success)){e.success.apply(this,r)}else{e.error.apply(this,r)}};var n=i.extend({},u,e,{success:t,error:e.error||f});var r=o.getItem("csrfToken");if(r){switch(s.type(n.data)){case"object":n.data.csrfToken=r;break;case"string":n.data+="&csrfToken="+r;break;default:n.data={csrfToken:r};break}}var a=i.ajax(n);return a}function c(e){return e.errcode===0||e.status===0||e.ret}var i=e.____MODULES["edb20c2042b670af16af04b9e354052a"];var s=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var o=e.____MODULES["24538986015918d4b562e397230af418"];var u={dataType:"json",type:"get",timeout:3e4,error:f};var a={ajax:l,post:function(e,t,n,r){if(s.type(t)==="function"){r=n;n=t;t={}}r=r||f;var i=l({url:e,data:t,success:n,type:"post",error:r});return i},get:function(e,t,n,r){if(s.type(t)==="function"){r=n;n=t;t={}}r=r||f;var i=l({url:e,data:t,success:n,error:r});return i},jsonp:function(e,t,n,r){if(s.type(t)==="function"){r=n;n=t;t={}}r=r||f;var o=l({url:e,data:t,dataType:"jsonp",success:i.proxy(n,context),error:i.proxy(r,context)});return o}};n.exports=a}(t.exports,t,e);e.____MODULES["88d5c499e26b6f8fc86d873910ae3aea"]=t.exports})(this);(function(e){var t={id:"525d1dc0d8839c64abc3253ded526e97",filename:"jquery.qlimitlen.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["aef633924a0fa77f0f39939c0bf845f7"];(function(e){function t(t){var n=this;var r=e.trim(n.val());var s=Math.ceil(i.countStrByWord(r));if(s<=t){n.trigger("action_less",s);return}if(s>t){r=i.cutString(r,t,"");n.trigger("action_more",s)}n.val(r)}e.fn.qlimitlen=function(n,r){var i="qlimitlen";this.each(function(s,o){var u=e(o);var a=a||20;if(!n){return}u.bind("keyup."+i,e.proxy(t,u,n));u.bind("keydown."+i,e.proxy(t,u,n));u.bind("check",e.proxy(t,u,n));u.trigger("check");if(r){for(i in r){u.bind(i,e.proxy(r[i]))}}});return this}})(jQuery)}(t.exports,t,e);e.____MODULES["525d1dc0d8839c64abc3253ded526e97"]=t.exports})(this);(function(e){var t={id:"f359268032ef95a76c48519ac6bb62c6",filename:"jquery.qsuggest.1.3.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){(function(e){function s(e){var t=e.offset();t["top"]+=e.outerHeight();return t}function o(e){return e.closest("table").data("data")[e.attr("data-ind")*1]}function u(e){var t=this;var n=t.visible();var r=e.keyCode;if(r===40&&!n){t.show();return}var i=t.el.find("tr");var s=i.filter(".active");switch(r){case 38:case 40:if(n){t._excludeEl=t._mouseFocus;s.removeClass("active");var u=e.keyCode===38?s.prev():s.next();if(u.size()===0)u=i.filter(r===38?":last":":first");var a=t.args.getData||o;var f=a(u);t.setValue(f);u.addClass("active");e.preventDefault();t._trigger("q-suggest-user-action",[e,f,r,u])}break;case 13:if(n){var f=t.getValue();t.hide();t._trigger("q-suggest-user-action",[e,f,r,s])}break;case 27:if(n){t.hide();t._trigger("q-suggest-user-action",[e,t.getValue(),r,s])}break;case 18:case 9:break;default:}}function a(e,t){if(!this.init)return new qsuggest(e,t);else return this.init(e,t)}var t=function(){var e="data-detect-oninput",t={},n={},r=1,i=1;var s=function(e,n,r,i){if(e.addEventListener)e.addEventListener(n,r,false);else if(e.attachEvent)e.attachEvent("on"+n,r);(t[i]||(t[i]=[])).push({t:n,h:r})};var o=function(e,n){if(!t[n])return;for(var r=0,i;i=t[n][r];r++)if(e.removeEventListener)e.removeEventListener(i["t"],i["h"],false);else if(e.detachEvent)e.detachEvent("on"+i["t"],i["h"]);delete t[n]};var u=function(e,t){var n=e.value;var r=function(){var i;if((i=e.value)!==n){if(r._sleep!==true)t.call(e,i,n);n=e.value}};return r};var a=navigator.userAgent.toLowerCase();return{version:"1.3",bind:function(t,o){var f,l=o[e];if(!l)o[e]=l=r++;if(!(f=t.getAttribute(e)))t.setAttribute(e,f=""+i++);var c=u(t,o);if("oninput"in t&&!/opera/.test(a))s(t,"input",c,l);else{var h;s(t,"focus",function(){if(!h)h=setInterval(c,100)},l);s(t,"blur",function(){if(h){clearInterval(h);h=null}},l)}n[l]={eid:f,checker:c};return t},unbind:function(t,r){if(r[e]){o(t,r[e]);delete n[r[e]]}return t},set:function(t,r){var i=t.getAttribute(e);if(i){var s=[];for(var o in n)if(n[o]["eid"]===i){s.push(n[o]["checker"]);n[o]["checker"]._sleep=true}t.value=r;for(var u=0,a=s.length;u<a;u++){s[u].call(t);s[u]._sleep=false}}else t.value=r}}}();e.qsuggest={version:"1.2"};var n=e.qsuggest.ROOT_KEY="q-suggest";var r=0;var i={ajax:{url:null,cache:false,success:function(){}},reader:function(e){return e},loader:function(e){return e},max:10,min:1,container:null,delay:100,rdelay:1e3,requestWithNothing:false,trimQuery:true,autoSelect:true,css:{"z-index":500},setValue:function(e){return e},render:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},exattr:function(e){return e}};e.extend(a.prototype,{init:function(s,a){this.key=++r;var f=this.ns=n+this.key;a=this.args=e.extend(true,{},i,a||{});var l=this.activeEl=e(s);var c=this;this.el=e('<div class="'+n+(a.customClass?" "+a.customClass:"")+'"></div>').appendTo(a["container"]||document.body).hide();this.el.data(n,this);this._handler=null;this._ajaxHandler=null;this._excludeEl=null;this._mouseFocus=null;this._last=[];this._cache={};this._value=null;e.each(a["on"]||{},function(e,t){l.bind(e+"."+f,t)});if(a["css"])this.el.css(c.args["css"]);var c=this;var h=false;l.bind("keydown."+f,function(e){var t=e.keyCode;if(t>=229){h=true}});t.bind(l[0],function(){c.show()});l.bind("keydown."+f,function(e){if(h){h=false;return}var t=c.args.keyevent||u;t.call(c,e);h=false});l.bind("blur."+f,function(e){if(c.visible()){var t=c.el.find("tr.active");if(t.length>0){var n=c.args.getData||o;if(c.args.autoSelect){c.setValue(n(t))}}else{c._trigger("q-suggest-noresult",[l])}c.hide()}});e("tr",this.el[0]).live("mouseover."+f+" mouseout."+f+" mousedown."+f,function(t){var n=e.nodeName(t.target,"tr")?e(t.target):e(t.target).parents("tr").eq(0);if(e(n[0]).attr("data-sug_type")==1){t.preventDefault();return}var r=n[0]!=c._excludeEl;if(t.type==="mouseover"){if(r){n.parents().children().removeClass("active");n.addClass("active");c._excludeEl=null}c._mouseFocus=n[0]}else if(t.type==="mouseout"){c._mouseFocus=null}else{var i=c.args.getData||o;c.setValue(i(n));c.hide();c._trigger("q-suggest-user-action",[t,c.getValue(),null,n])}});return this},req:function(){var t=this;if(t._handler)clearTimeout(t._handler);if(t._timeoutHandler){clearTimeout(t._timeoutHandler);t._timeoutHandler=null}if(t._ajaxHandler){t._ajaxHandler=null}t._handler=setTimeout(function(){var n=t.activeEl.val(),r=t.args.loader(n),i=null,s;if(t.args.trimQuery)r=e.trim(r);if(!r&&!t.args.requestWithNothing){t.draw(null);return}if(t._last&&t._last[0]===r){t.draw(t._last[1]);return}if(t._last&&t._last[0]==r)i=t._last;else if(t.args.cache&&t._cache[r])i=t._cache[r];var o=typeof t.args.ajax.url=="function"?t.args.ajax.url():t.args.ajax.url;if(i)t.draw((t._last=i)[1]);else if(!o)t.draw(null);else{o=o.replace(/\*|([^*]+)$/,encodeURIComponent(r)+"$1");var u=t.args.ajax.success;t._timeoutHandler=setTimeout(function(){t.hide()},t.args.rdelay);t._ajaxHandler=e.ajax(e.extend({},t.args.ajax,{url:o,success:function(e,i){clearTimeout(t._timeoutHandler);t._timeoutHandler=null;t._ajaxHandler=null;if(n!==t.activeEl.val())return;var s=t.args.reader.call(t,e,i);if(t.type(s)==="Array"){t.draw(s);t._last=t._cache[r]=[r,s,i]}u.apply(this,arguments)}}))}},t.args.delay)},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},show:function(){this.req()},hide:function(){if(this.visible()){this.el.hide();this._trigger("q-suggest-hide")}},draw:function(t){var n=this;this.el.empty();var r=this.args.min,i=this.args.max;if(!t||!t.length||t.length<r){this.hide();return}var o=[],u=this.args.render,a=this.args.exattr,f=true;var l=e.type(this.args.firstChoose)==="undefined"?true:this.args.firstChoose;var c=e.type(this.args.firstFunc)==="undefined"?function(){return true}:this.args.firstFunc;o.push('<table cellspacing="0" cellpadding="2"><tbody>');e.each(t,function(e,t){if(e>=i)return false;var n="";var r=c;if(f&&l&&r(t)){f=false;n=' class="active" '}o.push("<tr",n,' data-ind="',e,'"><td>',u(t),"</td></tr>")});o.push("</tbody></table>");var h=e(o.join("")).appendTo(this.el).data("data",t);if(!this.args["container"])this.el.css(s(this.activeEl));var p=this.args["width"],d=this.activeEl.outerWidth();if(typeof p==="function"){p=p()}if(!p||p<d)p=d;this.el.css("width",p);this.el.show();this._trigger("q-suggest-show",[t])},dispose:function(){this._trigger("q-suggest-dispose");this.activeEl.unbind("."+this.ns);e(window).unbind("."+this.ns);this.el.remove()},visible:function(){return this.el.is(":visible")},_trigger:function(){this.activeEl.triggerHandler.apply(this.activeEl,arguments)},setValue:function(e){t.set(this.activeEl[0],e);this._value=e;this._setExtData();this._trigger("q-suggest-setvalue",[e,this.activeEl])},_setExtData:function(){var e=this.el.find("tr.active");var t=this.args.getExtData?this.args.getExtData(this.el.find("tr.active")):{};this._trigger("q-suggest-setextdata",[t,this.activeEl])},getValue:function(){return this._value},set:function(e,t){var n=false;switch(e){case"container":this.el.appendTo(t||document.body);this.el.css({top:"",left:""});break}if(!n)for(var r=0,i=e.split("."),s=i.length,o=this.args;r<s&&(r!==s-1&&(o[i[r]]||(o[i[r]]={}))||(o[i[r]]=t));o=o[i[r]],r++){}return t},get:function(e){for(var t=0,n=this.args,r=e.split("."),i=r.length;t<i&&(n=n[r[t]]);t++){}return n}});e.fn.qsuggest=function(){var t=arguments;if(arguments.length>1&&this.data(n)){var r=null;if(arguments[0]==="option"||arguments[0]==="setting")this.each(function(i,s){var o=e(s);var u=this.data(n);if(u)r=r||(t.length>2?u.set(t[1],t[2]):u.get(t[1]))});return r}else if(arguments.length<=1){this.each(function(r,i){var s=e(i);if(s.data(n)){s.data(n).dispose();s.removeData(n)}var o=new a(i,t[0]);s.data(n,o)})}return this}})(jQuery)}(t.exports,t,e);e.____MODULES["f359268032ef95a76c48519ac6bb62c6"]=t.exports})(this);(function(e){var t={id:"fb6676bbeb3f7bf171ccf693306b1d38",filename:"suggest.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function s(e){function r(){var e=t.data("q-suggest");t.parent("div").addClass("sctext_box_on")}function i(){t.parent("div").removeClass("sctext_box_on")}var t=e.el;var n=e.entercb;t.qsuggest($.extend(e,{autoSelect:false,delay:100}));t.bind("focus.on",r);t.bind("blur.off",i);t.bind("keyup",function(e){var n=e.keyCode||e.which;if(n!=40&&n!=38&&n!=13){t.data("q-suggest").show()}})}var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];e.____MODULES["f359268032ef95a76c48519ac6bb62c6"];n.exports=s}(t.exports,t,e);e.____MODULES["fb6676bbeb3f7bf171ccf693306b1d38"]=t.exports})(this);(function(e){var t={id:"cca8bfa16c042ce6eb4021cac0c04274",filename:"config.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){var r={SUG_URLS:{CITY:"/suggest/plan?q=*&type=1&limit=4&callback=?",AREA:"/suggest/plan?q=*&type=2&limit=7&callback=?"},SEARCH_URI:"/place/api/dist/np/{{distId}}?new_plan=true",SEARCH_HOME_DEST_URI:"/place/api/dist/np2/{{distId}}",RECOMMEND_CITYS:"/place/api/dist/recommend_cities",DEST_INFO:{CITY_LOCATION:"/api/mapsearch/distIds/"},DEST_TYPE:{6:"城市",3:"国家",1:"州",7:"城市",0:"国际"}};t.exports=r}(t.exports,t,e);e.____MODULES["cca8bfa16c042ce6eb4021cac0c04274"]=t.exports})(this);(function(e){var t={id:"f499f9cbe4503a398f85810d66af4579",filename:"CitySug.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function f(e){function u(e){var t=c(e);e=h(t);if(!e){return""}var n="";if(!e.id&&!e.isDef){n='<div class="sug_item item sug_selfdefine">添加自定义“'+QNR.HTMLEncode(e.city)+"”</div>"}else{var r=[];var i=[];e.city?r.push(e.city):null;e.country?r.push(e.country):null;e.cityEnName?i.push(e.cityEnName):null;e.countryEnName?i.push(e.countryEnName):null;n='<div class="sug_item item">'+QNR.HTMLEncode(r.join(","))+"&nbsp;"+QNR.HTMLEncode(i.join(","))+"</div>"}return n}function f(e){r=e.data||[];var n=QNR.some(r,function(e){if(e.city==t.val()){return true}});!n&&r.push({query:t.val(),id:0,distType:"6",city:t.val(),cityEnName:"",province:"",provinceEnName:"",country:"中国",countryEnName:"China"});var i=[];var s;for(var o=0,u=r.length;o<u;o++){var a=r[o];s=[a.id,a.distType].join("_");i[i.length]=s}return i}function l(e,t,r,i,s){n(p(h(i)),s)}function c(e){var t;for(var n=0;n<r.length;n++){var i=r[n];if([i.id,i.distType].join("_")==e){t=n;break}}return t}function h(e){return r[e]}function p(e){return{city_name:e.city,city_id:e.id,days:e.trDays||1}}function m(){t.bind("keyup focus",function(e){code=e.keyCode||e.which;defData=t.data("defData");if(defData&&defData.length&&t.val()===""&&(e.type=="focus"||e.type=="keyup"&&code==8)){var n=[];QNR.forEach(defData,function(e){e.isDef=true;n.push([e.id,e.distType].join("_"))});r=defData;if(e.type=="keyup"){setTimeout(function(){t.data("q-suggest").draw(n);t.data("q-suggest")._last=[]},200)}else{t.data("q-suggest").draw(n);t.data("q-suggest")._last=[]}}})}var t=e.el;var n=e.enterFn;var r=[];var s=a.CITY;var d={max:10,customClass:"city_sug",el:i("body"),ajax:{url:s,dataType:"jsonp",cache:false},render:u,reader:f,entercb:l};t.qplaceHolder().qlimitlen(10);var v=i.extend(e.on,{"q-suggest-user-action":function(e,r,i,s,o){var u=o.data("ind");t.val(h(u).city);n&&n(h(u),s)}});e.showDef&&m();o(i.extend(d,e,{on:v}))}var i=e.____MODULES["edb20c2042b670af16af04b9e354052a"];e.____MODULES["edb44368d6da1ca32d60ffa026712ff5"];e.____MODULES["525d1dc0d8839c64abc3253ded526e97"];var s=e.____MODULES["aef633924a0fa77f0f39939c0bf845f7"];var o=e.____MODULES["fb6676bbeb3f7bf171ccf693306b1d38"];var u=e.____MODULES["cca8bfa16c042ce6eb4021cac0c04274"];var a=u.SUG_URLS;n.exports=f}(t.exports,t,e);e.____MODULES["f499f9cbe4503a398f85810d66af4579"]=t.exports})(this);(function(e){var t={id:"1c215cb2b26f2cbeb305c7cbcf472a99",filename:"drag.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["edb20c2042b670af16af04b9e354052a"];var s=window,o=s.document,u=i(s),a=i(o);var f={not_lock:false,lock_x:false,lock_y:false,min_x:0,max_x:1e5,min_y:0,max_y:1e5,container:null,move:i.noop,drag_start:i.noop,drag_end:i.noop};var l=function(e,t){var n=(e[0]||{}).nodeName;var r;if(n){r="body html".indexOf(n.toLowerCase())>-1?{top:0,left:0}:e.offset()}else{r={top:0,left:0}}var i=e.width();var s=e.height();return{min_x:Math.max(r.left,t.min_x),max_x:Math.min(r.left+i,t.max_x),min_y:Math.max(r.top,t.min_y),max_y:Math.min(r.top+s,t.max_y)}};var c=0;var h=function(e,t){this._dom=e;this._opts=t;this._id="drag_"+c++};h.prototype.dom=function(){return this._dom};h.prototype.init=function(){var e=this,t=this._id;e.enable()};h.prototype._dragStart=function(e){if(e.button&&e.button===2){return}var t=this;if(!t._enabled){return}i("body").addClass("unselect");e.preventDefault&&e.preventDefault();var n=0;var r=t._dom,o=t._id,f=r.width(),c=r.height();var h=e.pageX,p=e.pageY,d=r.offset();start_pos=r.position();var v=h-d.left,m=p-d.top;var g=a;var y=u.height(),b=u.width();var w=null;if(t._opts.container){w=t._opts.container}else{w=i("body")}var E;if(!t._opts.not_lock){E=l(w,t._opts)}r.bind("mouseup."+"id",function(){n=1});i(s).bind("blur."+o,i.proxy(t._dragEnd,t));g.bind("mousemove."+o,function(e){if(n===1){return}var i=e.pageX,s=e.pageY;var o=i-h,u=s-p;if(!t._started){var a=r.css("position");if(a!=="absolute"){r.data("position",a);r.css("position","absolute")}t._started=true;t._opts.drag_start(t,start_pos)}var l={left:start_pos.left+o,top:start_pos.top+u};if(!t._opts.not_lock){if(l.left<E.min_x){l.left=E.min_x}if(l.left+f>E.max_x){l.left=E.max_x-f}if(l.top<E.min_y){l.top=E.min_y}if(l.top+c>E.max_y){l.top=E.max_y-c}if(t._opts.lock_x){delete l.left}if(t._opts.lock_y){delete l.top}}r.css(l);t._opts.move(t,l,start_pos,o,u)});g.bind("mouseup."+o,function(e){t._dragEnd(e)})};h.prototype._dragEnd=function(e){var t=this;var n=t._id;var r=e.pageX,s=e.pageY;i("body").removeClass("unselect");if(!t._started){return}t._started=false;a.unbind("mousemove."+n);a.unbind("mouseup."+n);u.unbind("blur."+n);a.unbind("losecapture");t.enable();t._opts.drag_end(t,{x:r,y:s})};h.prototype.enable=function(){if(!this._enabled){this._enabled=true;this._dom.bind("mousedown."+this._id,i.proxy(this._dragStart,this))}};h.prototype.disable=function(){this._enabled=false;var e=this._id;this._dom.unbind("mousedown."+e)};h.prototype.undragable=function(){var e=this;e.disable();for(var t in e){delete e[t]}};h.prototype.setOptions=function(e,t){if(i.type(e)==="object"){for(var n in e){if(e.hasOwnProperty(n)){this._opts[n]=e[n]}}}else if(i.type(e)==="string"&&i.type(t)!=="undefined"){this._opts[e]=t}};h.prototype.dragStart=h.prototype._dragStart;h.prototype.dragEnd=h.prototype._dragEnd;var p="__drag__";i.fn.dragable=function(e){var e=e||{};var t=i.extend({},f,e);this.each(function(e,n){var r=i(n);var s=new h(r,t);r.data(p,s);s.init()});return this};i.fn.undragable=function(){var e=this.data(p);e&&e.undragable();this.removeData(p);return this};n.exports=h}(t.exports,t,e);e.____MODULES["1c215cb2b26f2cbeb305c7cbcf472a99"]=t.exports})(this);(function(e){var t={id:"5671f406577a67004095dbd039efb412",filename:"CityDrag.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function o(e){var t=e.proxy_dom,n=e.group,r=e.container,i=e.startFn,s=e.moveFn,o=e.endFn;var u=$('<div class="temp_space">放在这里</div>');t.dragable({container:r,drag_start:function(e,n){t.css(n).css({position:"absolute","z-index":1e3}).attr("mark","true");t.after(u);i&&i()},move:function(e,r,i,o,a){function p(e){var t=e.offset(),n=e.outerWidth(),r=e.outerHeight();var i={top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,width:n,height:r};i.c_x=i.left+n/2;i.c_y=i.top+r/2;return i}function d(e,t){var n=e.left+e.width/2,r=e.top+e.height/2;for(var i=0;i<t.length;i++){var s=t[i].dom;if(s.attr("mark")){continue}var o=p(s);l=i;if(r>o.top&&r<o.bottom){if(r>o.c_y){s.after(u)}else{s.before(u)}break}}}var f=t;var l=0;f.css("cursor","move");var c={left:i.left+o,top:i.top+a};t.css(c).css({position:"absolute","z-index":1e3}).attr("mark","true");var h={left:f.offset().left,top:f.offset().top,width:f.width(),height:f.height()};d(h,n);s(t,c)},drag_end:function(e,n){u.after(t);u.remove();t.css({position:"relative",left:"0",top:"0","z-index":"100"}).removeAttr("mark");o&&o()}});return t.data("__drag__")}var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=e.____MODULES["1c215cb2b26f2cbeb305c7cbcf472a99"];n.exports=o}(t.exports,t,e);e.____MODULES["5671f406577a67004095dbd039efb412"]=t.exports})(this);(function(e){var t={id:"34e814670e74b19de1c6553b8188f327",filename:"qmap.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];if(typeof window.QNR=="undefined"){window.QNR={}}window.QNR.Map=i.Map||{};(function(){function e(e,t){var n=this;this._event=this._event||[];this._event["baidu"]=this._event["baidu"]||[];this._event["baidu"][e]=this._event["baidu"][e]||[];var r=this._event["baidu"][e].length;this._event["baidu"][e][r]=function(e){e.target=n;if(e.point){e.latlng=new i.Map.LatLng(new BMap.Point(e.point.lng,e.point.lat))}if(e.pixel){e.pixel={x:e.pixel.x,y:e.pixel.y}}t.apply(n,[e])};this._objs["baidu"].addEventListener(e,this._event["baidu"][e][r]);return this._event["baidu"][e][r]}function t(e,t){a(this._event["baidu"][e],t);this._objs["baidu"].removeEventListener(e,t)}function n(e,t){var n=this;this._event=this._event||[];this._event["google"]=this._event["google"]||[];this._event["google"][e]=this._event["google"][e]||[];var r=this._event["google"][e].length;var s=google.maps.event.addListener(this._objs["google"],e,function(e){var r=e;if(e&&e.latLng){e.latlng=new i.Map.LatLng(new google.maps.LatLng(e.latLng.lat(),e.latLng.lng()))}if(e&&e.pixel){e.pixel={x:e.pixel.x,y:e.pixel.y}}t.apply(n,[e])});this._event["google"][e][r]=s;return s}function r(e,t){a(this._event["google"][e],t);google.maps.event.removeListener(t)}function s(e,t){var n=function(){};n.prototype=t.prototype;e.prototype=new n;e.prototype.constructor=e}function o(e,t){for(var n in e.prototype){if("function"==typeof e.prototype[n]){t[n]=e.prototype[n]}}}function u(e,t){if("undefined"==typeof e){return t}else if(e){return true}else{return false}}function a(e,t){var n=e.length;while(n--){if(n in e&&e[n]===t){e.splice(n,1)}}return e}function f(e){var t=[],n=0,r;for(r in e){if(e.hasOwnProperty(r)){t[n++]=r}}return t}i.Map=function(e,t,n){e=e.toLowerCase();if("baidu"===e){return new i.Map.Adapter.Baidu(t,n)}else if("google"===e){return new i.Map.Adapter.Google(t,n)}else{throw"No such adapter vendor."}};i.Map.LatLng=function(e,t,n){this._objs={};this.addObject(e,t,n)};i.Map.LatLng.prototype={addObject:function(e,t,n){if(window.BMap&&BMap.Point&&e instanceof BMap.Point){this._objs["baidu"]={lat:e.lat,lng:e.lng,obj:e}}else if(window.google&&google.maps&&google.maps.LatLng&&e instanceof google.maps.LatLng){this._objs["google"]={lat:e.lat(),lng:e.lng(),obj:e}}else{this._objs[n]={lat:e,lng:t,obj:null}}},getLat:function(e){var t=f(this._objs),n;if(this._objs[e]){n=this._objs[e]}else{n=this._objs[t[0]]}return n.lat},getLng:function(e){var t=f(this._objs),n;if(this._objs[e]){n=this._objs[e]}else{n=this._objs[t[0]]}return n.lng},equals:function(e){},_toBaidu:function(){if(!this._objs["baidu"]){this._transLatLng("baidu")}else if(!this._objs["baidu"].obj){this._objs["baidu"].obj=new BMap.Point(this._objs["baidu"].lng,this._objs["baidu"].lat)}return this._objs["baidu"].obj},_toGoogle:function(){if(!this._objs["google"]){this._transLatLng("google")}if(!this._objs["google"].obj){this._objs["google"].obj=new google.maps.LatLng(this._objs["google"].lat,this._objs["google"].lng)}return this._objs["google"].obj},_transLatLng:function(e){var t,n,r,i;t=f(this._objs);r=t.length;for(n=0;n<r;n++){i="_"+t[n].toLowerCase()+"To"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase();if(this[i]&&"function"==typeof this[i]){this._objs[e]=this[i](this._objs[t[n]]);break}}if(!this._objs[e]){throw"Can't convert to "+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()}},_baiduToGoogle:function(e){return{lat:e.lat-.006,lng:e.lng-.0065,obj:null}},_googleToBaidu:function(e){return{lat:e.lat+.006,lng:e.lng+.0065,obj:null}}};i.Map.Pixel=function(e,t){this.x=e;this.y=t;this._objs={}};i.Map.Pixel.prototype._toBaidu=function(){if(!this._objs["baidu"]){this._objs["baidu"]=BMap.Pixel(this.x,this.y)}return this._objs["baidu"]};i.Map.Pixel.prototype._toGoogle=function(){if(!this._objs["google"]){this._objs["google"]=new google.maps.Point(this.x,this.y)}return this._objs["google"]};i.Map.Bounds=function(e,t,n){this._sw=e,this._ne=t;this._objs=[];if("baidu"==n){this._toBaidu()}else if("google"==n){this._toGoogle()}};i.Map.Bounds.prototype._toBaidu=function(){if(!this._objs["baidu"]){this._objs["baidu"]=new BMap.Bounds(this._sw?this._sw._toBaidu():null,this._ne?this._ne._toBaidu():null);o(this._toBaidu,this)}return this._objs["baidu"]};i.Map.Bounds.prototype._toBaidu.prototype.equals=function(e){return this._objs["baidu"].equals(e._toBaidu)};i.Map.Bounds.prototype._toBaidu.prototype.getSouthWest=function(){var e=this._objs["baidu"].getSouthWest();return new i.Map.LatLng(new BMap.Point(e.lng,e.lat))};i.Map.Bounds.prototype._toBaidu.prototype.getNorthEast=function(){var e=this._objs["baidu"].getNorthEast();return new i.Map.LatLng(new BMap.Point(e.lng,e.lat))};i.Map.Bounds.prototype._toBaidu.prototype.isEmpty=function(){return this._objs["baidu"].isEmpty()};i.Map.Bounds.prototype._toBaidu.prototype.toSpan=function(){var e=this._objs["baidu"].toSpan();return new i.Map.LatLng(new BMap.Point(e.lng,e.lat))};i.Map.Bounds.prototype._toBaidu.prototype.intersects=function(e){return!this._objs["baidu"].intersects(e._toBaidu()).isEmpty()};i.Map.Bounds.prototype._toBaidu.prototype.getCenter=function(){var e=this._objs["baidu"].getCenter();return new i.Map.LatLng(new BMap.Point(e.lng,e.lat))};i.Map.Bounds.prototype._toBaidu.prototype.extend=function(e){this._objs["baidu"].extend(e._toBaidu());this._sw=this.getSouthWest();this._ne=this.getNorthEast()};i.Map.Bounds.prototype._toBaidu.prototype.containsPoint=function(e){var t=this._objs["baidu"];var n=e._toBaidu();return t.containsPoint(n)};i.Map.Bounds.prototype._toGoogle=function(e){if(!this._objs["google"]){if(this._sw&&this._ne){this._objs["google"]=new google.maps.LatLngBounds(this._sw._toGoogle(),this._ne._toGoogle())}else{this._objs["google"]=new google.maps.LatLngBounds}o(this._toGoogle,this)}return this._objs["google"]};i.Map.Bounds.prototype._toGoogle.prototype.equals=function(e){return this._objs["google"].equals(e._toGoogle())};i.Map.Bounds.prototype._toGoogle.prototype.getSouthWest=function(){var e=this._objs["google"].getSouthWest();return new i.Map.LatLng(e.lat(),e.lng(),"google")};i.Map.Bounds.prototype._toGoogle.prototype.getNorthEast=function(){var e=this._objs["google"].getNorthEast();return new i.Map.LatLng(e.lat(),e.lng(),"google");return new i.Map.LatLng(google.maps.LatLng(e.lat(),e.lng()))};i.Map.Bounds.prototype._toGoogle.prototype.isEmpty=function(){return this._objs["google"].isEmpty()};i.Map.Bounds.prototype._toGoogle.prototype.toSpan=function(){var e=this._objs["google"].toSpan();return new i.Map.LatLng(google.maps.LatLng(e.lat(),e.lng()))};i.Map.Bounds.prototype._toGoogle.prototype.intersects=function(e){return this._objs["google"].intersects(e._toGoogle())};i.Map.Bounds.prototype._toGoogle.prototype.getCenter=function(){var e=this._objs["google"].getCenter();return new i.Map.LatLng(new google.maps.LatLng(e.lat(),e.lng()))};i.Map.Bounds.prototype._toGoogle.prototype.extend=function(e){this._objs["google"].extend(e._toGoogle());this._sw=this.getSouthWest();this._ne=this.getNorthEast()};i.Map.Bounds.prototype._toGoogle.prototype.containsPoint=function(e){var t=this._objs["google"];var n=e._toGoogle();return t.contains(n)};i.Map.Size=function(e,t){this.width=e;this.height=t;this._objs=[]};i.Map.Size.prototype._toBaidu=function(){if(!this._objs["baidu"]){this._objs["baidu"]=new BMap.Size(this.width,this.height)}return this._objs["baidu"]};i.Map.Size.prototype._toGoogle=function(){if(!this._objs["google"]){this._objs["google"]=new google.maps.Size(this.width,this.height)}return this._objs["google"]};i.Map.Icon=function(e,t,n,r){this._url=e,this._size=t,this._origin=n,this._anchor=r;this._objs=[]};i.Map.Icon.prototype._toBaidu=function(){var e={};if(!this._objs["baidu"]){if(this._origin)e.imageOffset=new BMap.Size(0-this._origin.x,this._origin.y);if(this._anchor)e.anchor=new BMap.Size(this._anchor.x,this._anchor.y);this._objs["baidu"]=new BMap.Icon(this._url,this._size._toBaidu(),e)}return this._objs["baidu"]};i.Map.Icon.prototype._toGoogle=function(){var e,t;if(!this._objs["google"]){if(this._anchor){e=this._anchor._toGoogle();t=this._origin._toGoogle();this._objs["google"]=new google.maps.MarkerImage(this._url,this._size._toGoogle(),t,e)}else if(this._origin){t=this._origin._toGoogle();this._objs["google"]=new google.maps.MarkerImage(this._url,this._size._toGoogle(),t)}else{this._objs["google"]=new google.maps.MarkerImage(this._url,this._size._toGoogle())}}return this._objs["google"]};i.Map.Control=function(e,t,n){this._map=e;this._objs=[];this._opts=t||{};this._init=n};i.Map.Control.prototype._toBaidu=function(){var e=this;if(!this._objs["baidu"]){this._objs["baidu"]=new BMap.Control;this._objs["baidu"].defaultAnchor=BMAP_ANCHOR_BOTTOM_RIGHT;this._objs["baidu"].defaultOffset=new BMap.Size(0,0);this._objs["baidu"].initialize=function(){return e._init.apply(e._objs["baidu"],[e._map])}}return this._objs["baidu"]};i.Map.Control.prototype._toGoogle=function(){var e=this;if(!this._objs["google"]){var t=this._init(this._map);this._objs["google"]={pos:google.maps.ControlPosition.RIGHT_BOTTOM,div:t}}return this._objs["google"]};i.Map.Control.Position={};i.Map.Control.Position.TOP_LEFT=1;i.Map.Control.Position.TOP_RIGHT=2;i.Map.Control.Position.BOTTOM_LEFT=3;i.Map.Control.Position.BOTTOM_RIGHT=4;i.Map.Control.Position._toBaidu=function(e){var t=[null,BMAP_ANCHOR_TOP_LEFT,BMAP_ANCHOR_TOP_RIGHT,BMAP_ANCHOR_BOTTOM_LEFT,BMAP_ANCHOR_BOTTOM_RIGHT];return t[e]};i.Map.Control.Position._toGoogle=function(e){var t=[null,google.maps.ControlPosition.LEFT_TOP,google.maps.ControlPosition.TOP_RIGHT,google.maps.ControlPosition.BOTTOM_LEFT,google.maps.ControlPosition.BOTTOM_RIGHT];return t[e]};i.Map.Control.Navigation=function(e,t){i.Map.Control.apply(this,[e,t,null]);this._opts.position=this._opts.position||i.Map.Control.Position.TOP_LEFT};i.Map.Control.Navigation.prototype=new i.Map.Control;i.Map.Control.Navigation.prototype.constructor=i.Map.Control.Navigation;i.Map.Control.Navigation.prototype._toBaidu=function(){if(!this._objs["baidu"]){var e=this._opts.style;this._objs["baidu"]=new BMap.NavigationControl({anchor:i.Map.Control.Position._toBaidu(this._opts.position),type:e})}return this._objs["baidu"]};i.Map.Control.Navigation.prototype._toGoogle=function(){var e=i.Map.Control.Position._toGoogle(this._opts.position);var t=this._opts.style;if(!this._objs["google"]){this._objs["google"]={pos:e,obj:{panControl:true,panControlOptions:{position:e},zoomControl:true,zoomControlOptions:{position:e,style:t}}}}return this._objs["google"]};i.Map.Control.OverviewMap=function(e,t){i.Map.Control.apply(this,arguments)};i.Map.Control.OverviewMap.prototype=new i.Map.Control;i.Map.Control.OverviewMap.prototype.constructor=i.Map.Control.OverviewMap;i.Map.Control.OverviewMap.prototype._toBaidu=function(){return new BMap.OverviewMapControl({isOpen:u(this._options.open,false)})};i.Map.Control.OverviewMap.prototype._toGoogle=function(){var e={overviewMapControl:true,overviewMapControlOptions:{opened:u(this._options.open,false)}};return e};i.Map.Overlay=function(){};i.Map.Overlay.prototype._toBaidu=function(n){var r=this.constructor.prototype;var i=r._objs=r._objs||[];var o=this,u;if(!i["baidu"]){i["baidu"]=function(e,t){this._overlay=e;this._map=t};s(i["baidu"],BMap.Overlay);i["baidu"].prototype.initialize=function(){var e=this._map;return r.onInit.apply(this,[e,this._overlay])};i["baidu"].prototype.draw=function(){var e=this._map;return r.onDraw.apply(this,[e,this._overlay])};i["baidu"].prototype.getPanes=function(){var e=this._map;return e.getPanes()}}this.addEventListener=e;this.removeEventListener=t;if(!this.hasOwnProperty("_objs")){this._objs=[]}if(!this._objs["baidu"]){this._objs["baidu"]=new i["baidu"](o,n)}return this._objs["baidu"]};i.Map.Overlay.prototype._toGoogle=function(e){var t=this.constructor.prototype;var i=t._objs=t._objs||[];var o=this,u;if(!i["google"]){i["google"]=function(e,t){this._overlay=e;this._map=t};s(i["google"],google.maps.OverlayView);i["google"].prototype.onAdd=function(){var e=this._map;this._div=t.onInit.apply(this,[e,this._overlay]);return this._div};i["google"].prototype.draw=function(){var e=this._map;return t.onDraw.apply(this,[e,this._overlay])};i["google"].prototype.onRemove=function(){this._div.parentNode.removeChild(this._div);this._div=null}}o.addEventListener=n;o.removeEventListener=r;if(!this.hasOwnProperty("_objs")){this._objs=[]}if(!this._objs["google"]){this._objs["google"]=new i["google"](o,e)}return this._objs["google"]};i.Map.Overlay.Marker=function(e,t){this._point=e,this._options=t;this._map=null,this._objs=[],this._event=[]};i.Map.Overlay.Marker.prototype=new i.Map.Overlay;i.Map.Overlay.Marker.prototype.constructor=i.Map.Overlay.Marker;i.Map.Overlay.Marker.prototype._toBaidu=function(e){this._map=e;var t={enableDragging:this._options["draggable"]||false,enableClicking:this._options["clickable"]||true,raiseOnDrag:this._options["raiseOnDrag"]||false,title:this._options["title"]||""};if(this._options["icon"]){t.icon=this._options["icon"]._toBaidu()}if(!this._objs["baidu"]){this._objs["baidu"]=new BMap.Marker(this._point._toBaidu(),t);o(this._toBaidu,this)}return this._objs["baidu"]};i.Map.Overlay.Marker.prototype._toBaidu.prototype.addEventListener=e;i.Map.Overlay.Marker.prototype._toBaidu.prototype.removeEventListener=t;i.Map.Overlay.Marker.prototype._toBaidu.prototype.setPosition=function(e){};i.Map.Overlay.Marker.prototype._toBaidu.prototype.getPosition=function(){};i.Map.Overlay.Marker.prototype._toBaidu.prototype.getPoint=function(){return this._point};i.Map.Overlay.Marker.prototype._toGoogle=function(){var e={clickable:this._options["clickable"]||true,draggable:this._options["draggable"]||false,position:this._point._toGoogle(),raiseOnDrag:this._options["raiseOnDrag"]||false,title:this._options["title"]||""};if(this._options["icon"]){e.icon=this._options["icon"]._toGoogle()}var t=new google.maps.Marker(e);if(!this._objs["google"]){this._objs["google"]=new google.maps.Marker(e);o(this._toGoogle,this)}return this._objs["google"]};i.Map.Overlay.Marker.prototype._toGoogle.prototype.getPoint=function(){return this._point};i.Map.Overlay.Marker.prototype._toGoogle.prototype.addEventListener=n;i.Map.Overlay.Marker.prototype._toGoogle.prototype.removeEventListener=r;i.Map.Overlay.Marker.prototype._toGoogle.prototype.setIcon=function(e){this._objs["google"].setIcon(e)};i.Map.Overlay.Marker.prototype._toGoogle.prototype.getIcon=function(e){return i.Map.Icon._fromBaidu(this._objs["baidu"].getIcon())};i.Map.Overlay.Polyline=function(e,t){this._map=null;this._points=e;this._options=t||{};this._objs=[];this._event=[]};i.Map.Overlay.Polyline.prototype=new i.Map.Overlay;i.Map.Overlay.Polyline.prototype.constructor=i.Map.Overlay.Polyline;i.Map.Overlay.Polyline.prototype._toBaidu=function(e){this._map=e;var t=[],n=this._points.length;for(var r=0;r<n;r++){t.push(this._points[r]._toBaidu())}var s={strokeStyle:"solid",enableMassClear:true,enableEditing:false};i.mix(s,this._options,true);if(!this._objs["baidu"]){this._objs["baidu"]=new BMap.Polyline(t,s);o(this._toBaidu,this)}return this._objs["baidu"]};i.Map.Overlay.Polyline.prototype._toBaidu.prototype.addEventListener=e;i.Map.Overlay.Polyline.prototype._toBaidu.prototype.removeEventListener=t;i.Map.Overlay.Polyline.prototype._toBaidu.prototype.getPath=function(){var e=this._objs["baidu"].getPath();var t=[],n,r=e.length;for(n=0;n<r;n++){t.push(new i.Map.LatLng(e[n]))}return t};i.Map.Overlay.Polyline.prototype._toBaidu.prototype.setPath=function(e){var t=[],n,r=e.length;for(n=0;n<r;n++){t.push(e[n]._toBaidu())}this._objs["baidu"].setPath(t)};i.Map.Overlay.Polyline.prototype._toBaidu.prototype.setStrokeColor=function(e){this._objs["baidu"].setStrokeColor(e)};i.Map.Overlay.Polyline.prototype._toGoogle=function(e){this._map=e;var t=[],n=this._points.length;for(var r=0;r<n;r++){t.push(this._points[r]._toGoogle())}var i={path:t,strokeColor:"#0096ff"};if(this._options["strokeColor"])i.strokeColor=this._options["strokeColor"];if(this._options["strokeOpacity"])i.strokeOpacity=this._options["strokeOpacity"];if(this._options["strokeWeight"])i.strokeWeight=this._options["strokeWeight"];if(this._options["clickable"])i.clickable=this._options["clickable"];if(!this._objs["google"]){this._objs["google"]=new google.maps.Polyline(i);o(this._toGoogle,this)}return this._objs["google"]};i.Map.Overlay.Polyline.prototype._toGoogle.prototype.addEventListener=n;i.Map.Overlay.Polyline.prototype._toGoogle.prototype.removeEventListener=r;i.Map.Overlay.Polyline.prototype._toGoogle.prototype.getPath=function(){var e=this._objs["google"].getPath();var t=[],n,r=e.length;for(n=0;n<r;n++){t.push(new i.Map.LatLng(e[n]))}return t};i.Map.Overlay.Polyline.prototype._toGoogle.prototype.setPath=function(e){var t=[],n,r=e.length;for(n=0;n<r;n++){t.push(e[n]._toGoogle())}this._objs["google"].setPath(t)};i.Map.Overlay.Polyline.prototype._toGoogle.prototype.setStrokeColor=function(e){this._objs["google"].setOptions({strokeColor:e})};i.Map.Overlay.Polygon=function(e,t){this._map=null;this._points=e;this._options=t;this._objs=[];this._event=[]};i.Map.Overlay.Polygon.prototype=new i.Map.Overlay;i.Map.Overlay.Polygon.prototype.constructor=i.Map.Overlay.Polygon;i.Map.Overlay.Polygon.prototype._toBaidu=function(e){this._map=e;var t=[],n=this._points.length;for(var r=0;r<n;r++){t.push(this._points[r]._toBaidu())}var i={strokeStyle:"solid",enableMassClear:true,enableEditing:false};if(this._options["strokeColor"])i.strokeColor=this._options["strokeColor"];if(this._options["strokeOpacity"])i.strokeOpacity=this._options["strokeOpacity"];if(this._options["strokeWeight"])i.strokeWeight=this._options["strokeWeight"];if(this._options["fillColor"])i.fillColor=this._options["fillColor"];if(this._options["fillOpacity"])i.fillOpacity=this._options["fillOpacity"];if(this._options["clickable"])i.enableClicking=this._options["clickable"];if(!this._objs["baidu"]){this._objs["baidu"]=new BMap.Polygon(t,i);o(this._toBaidu,this)}return this._objs["baidu"]};i.Map.Overlay.Polygon.prototype._toBaidu.prototype.addEventListener=e;i.Map.Overlay.Polygon.prototype._toBaidu.prototype.removeEventListener=t;i.Map.Overlay.Polygon.prototype._toBaidu.prototype.getPath=function(){var e=this._objs["baidu"].getPath();var t=[],n,r=e.length;for(n=0;n<r;n++){t.push(new i.Map.LatLng(e[n]))}return t};i.Map.Overlay.Polygon.prototype._toBaidu.prototype.setPath=function(e){var t=[],n,r=e.length;for(n=0;n<r;n++){t.push(e[n]._toBaidu())}this._objs["baidu"].setPath(t)};i.Map.Overlay.Polygon.prototype._toBaidu.prototype.setStrokeColor=function(e){this._objs["baidu"].setStrokeColor(e)};i.Map.Overlay.Polygon.prototype._toBaidu.prototype.setFillColor=function(e){this._objs["baidu"].setFillColor(e)};i.Map.Overlay.Polygon.prototype._toBaidu.prototype.setFillOpacity=function(e){this._objs["baidu"].setFillOpacity(e)};i.Map.Overlay.Polygon.prototype._toBaidu.prototype.getBounds=function(e){return this._objs["baidu"].getBounds()};i.Map.Overlay.Polygon.prototype._toGoogle=function(e){this._map=e;var t=[],n=this._points.length;for(var r=0;r<n;r++){t.push(this._points[r]._toGoogle())}t.push(this._points[0]._toGoogle());var i={paths:t};if(this._options["strokeColor"])i.strokeColor=this._options["strokeColor"];if(this._options["strokeOpacity"])i.strokeOpacity=this._options["strokeOpacity"];if(this._options["strokeWeight"])i.strokeWeight=this._options["strokeWeight"];if(this._options["fillColor"])i.fillColor=this._options["fillColor"];if(this._options["fillOpacity"])i.fillOpacity=this._options["fillOpacity"];if(this._options["clickable"])i.clickable=this._options["clickable"];if(!this._objs["google"]){this._objs["google"]=new google.maps.Polygon(i);o(this._toGoogle,this)}return this._objs["google"]};i.Map.Overlay.Polygon.prototype._toGoogle.prototype.addEventListener=n;i.Map.Overlay.Polygon.prototype._toGoogle.prototype.removeEventListener=r;i.Map.Overlay.Polygon.prototype._toGoogle.prototype.getPath=function(){var e=this._objs["google"].getPath();var t=[],n,r=e.length;for(n=0;n<r;n++){t.push(new i.Map.LatLng(e[n]))}return t};i.Map.Overlay.Polygon.prototype._toGoogle.prototype.setPath=function(e){var t=[],n,r=e.length;for(n=0;n<r;n++){t.push(e[n]._toGoogle())}this._objs["google"].setPath(t)};i.Map.Overlay.Polygon.prototype._toGoogle.prototype.setStrokeColor=function(e){this._objs["google"].setOptions({strokeColor:e})};i.Map.Overlay.Polygon.prototype._toGoogle.prototype.setFillColor=function(e){this._objs["google"].setOptions({fillColor:e})};i.Map.Overlay.Polygon.prototype._toGoogle.prototype.setFillOpacity=function(e){this._objs["google"].setOptions({fillOpacity:e})};i.Map.Overlay.Polygon.prototype._toGoogle.prototype.getBounds=function(){return this._objs["google"].getBounds()};i.Map.Adapter={};i.Map.Adapter.Baidu=function(e,t){this._overlays=[],this._controls=[],this._event=[],this._objs=[];var n={mapType:BMAP_NORMAL_MAP,enableHighResolution:false,enableAutoResize:true,enableMapClick:false};if("number"==typeof t.minZoom){n.minZoom=t.minZoom}if("number"==typeof t.maxZoom){n.maxZoom=t.maxZoom}this._map=new BMap.Map(e,n);if(t.center&&"number"==typeof t.zoom){this._map.centerAndZoom(t.center._toBaidu(),t.zoom)}u(t.scrollwheel,false)?this._map.enableScrollWheelZoom():this._map.disableScrollWheelZoom();u(t.doubleClickZoom,true)?this._map.enableDoubleClickZoom():this._map.disableDoubleClickZoom();u(t.keyboard,false)?this._map.enableKeyboard():this._map.disableKeyboard();this._objs["baidu"]=this._map};i.Map.Adapter.Google=function(e,t){this._overlays=[],this._controls=[],this._event=[],this._objs=[];e="string"==typeof e?document.getElementById(e):e;this._options={center:t.center._toGoogle(),zoom:t.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:true};this._options.draggable=u(t.draggable,true);this._options.scrollwheel=u(t.scrollwheel,false);this._options.disableDoubleClickZoom=!u(t.doubleClickZoom,true);this._options.keyboardShortcuts=u(t.keyboard,false);if("number"==typeof t.minZoom){this._options.minZoom=t.minZoom}if("number"==typeof t.maxZoom){this._options.maxZoom=t.maxZoom}this._options.styles=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}];this._map=new google.maps.Map(e,this._options);this._objs["google"]=this._map};i.Map.Adapter.Baidu.prototype.getContainer=function(){return this._map.getContainer()};i.Map.Adapter.Google.prototype.getContainer=function(){return this._map.getDiv()};i.Map.Adapter.Baidu.prototype.getMap=function(){return this._map};i.Map.Adapter.Google.prototype.getMap=function(){return this._map};i.Map.Adapter.Baidu.prototype.getCenter=i.Map.Adapter.Google.prototype.getCenter=function(){return i.Map.LatLng(this._map.getCenter())};i.Map.Adapter.Baidu.prototype.setCenter=function(e){this._map.setCenter(e._toBaidu())};i.Map.Adapter.Google.prototype.setCenter=function(e){this._map.setCenter(e._toGoogle())};i.Map.Adapter.Baidu.prototype.getZoom=i.Map.Adapter.Google.prototype.getZoom=function(){return this._map.getZoom()};i.Map.Adapter.Baidu.prototype.setZoom=i.Map.Adapter.Google.prototype.setZoom=function(e){this._map.setZoom(e)};i.Map.Adapter.Baidu.prototype.getBounds=function(){var e=this._map.getBounds();return new i.Map.Bounds(new i.Map.LatLng(e.getSouthWest()),new i.Map.LatLng(e.getNorthEast()),"baidu")};i.Map.Adapter.Google.prototype.getBounds=function(){var e=this._map.getBounds();return new i.Map.Bounds(new i.Map.LatLng(e.getSouthWest()),new i.Map.LatLng(e.getNorthEast()),"google")};i.Map.Adapter.Baidu.prototype.setCursor=function(e){this._map.setDefaultCursor(e)};i.Map.Adapter.Google.prototype.setCursor=function(e){this._map.setOptions({draggableCursor:e})};i.Map.Adapter.Baidu.prototype.setViewport=function(e,t){var n=[],r,s;if(e instanceof i.Map.Bounds){n.push(e.getSouthWest()._toBaidu());n.push(e.getNorthEast()._toBaidu())}else if(e instanceof Array){s=e.length;for(r=0;r<s;r++){n.push(e[r]._toBaidu())}}this._map.setViewport(n,t)};i.Map.Adapter.Google.prototype.setViewport=function(e,t){var n;if(e instanceof i.Map.Bounds){n=e._toGoogle()}else if(e instanceof Array){var n=new google.maps.LatLngBounds,r,s=e.length;for(r=0;r<s;r++){n.extend(e[r]._toGoogle())}}if(t&&t.margins){var o=this._map.getDiv().clientHeight,u=this._map.getDiv().clientWidth;var a=t.margins[0],f=t.margins[1],l=t.margins[2],c=t.margins[3];var h=o-a-l,p=u-c-f;var d=n.toSpan();var v;if(h/d.lat()<p/d.lng()){v=h/d.lat();c+=(p-d.lng()*v)*c/(c+f);f+=(p-d.lng()*v)*f/(c+f)}else{v=p/d.lng();a+=(h-d.lat()*v)*a/(a+l);l+=(h-d.lat()*v)*l/(a+l)}var m=n.getSouthWest(),g=n.getNorthEast();var y=new google.maps.LatLng(m.lat()-c/v,m.lng()-l/v);var b=new google.maps.LatLng(g.lat()+f/v,g.lng()+a/v);n.extend(y);n.extend(b)}this._map.fitBounds(n)};i.Map.Adapter.Google.prototype.setViewport=function(e,t){var n;var r=this;if(e instanceof i.Map.Bounds){n=e._toGoogle()}else if(e instanceof Array){var n=new google.maps.LatLngBounds,s,o=e.length;for(s=0;s<o;s++){n.extend(e[s]._toGoogle())}}this._map.fitBounds(n);if(t&&t.margins){var u=null;var a=function(){var e=new google.maps.LatLngBounds;var i=r._map.getDiv().clientHeight,s=r._map.getDiv().clientWidth;var o=t.margins[0],a=t.margins[1],f=t.margins[2],c=t.margins[3];if(o){var h=new google.maps.Point(0,o);var p=l.getGLatLng(r._map,h,n);e.extend(p)}if(c){var h=new google.maps.Point(c,0);var p=l.getGLatLng(r._map,h,n);e.extend(p)}if(a){var h=new google.maps.Point(s-a,0);var p=l.getGLatLng(r._map,h,n);e.extend(p)}if(f){var h=new google.maps.Point(0,i-f);var p=l.getGLatLng(r._map,h,n);e.extend(p)}r._map.fitBounds(n.union(e));if(u){google.maps.event.removeListener(u)}};if(!r._map.getProjection()){u=google.maps.event.addListener(r._map,"projection_changed",a)}else{a()}}};i.Map.Adapter.Baidu.prototype.MAP_TYPE="baidu";i.Map.Adapter.Google.prototype.MAP_TYPE="google";i.Map.Adapter.Baidu.prototype.panBy=function(e,t){this._map.panBy(e,t)};i.Map.Adapter.Google.prototype.panBy=function(e,t){this._map.panBy(-e,-t)};i.Map.Adapter.Baidu.prototype.panTo=function(e){this._map.panTo(e._toBaidu())};i.Map.Adapter.Google.prototype.panTo=function(e){this._map.panTo(e._toGoogle())};i.Map.Adapter.Baidu.prototype.addControl=function(e){this._map.addControl(e._toBaidu());this._controls.push(e)};i.Map.Adapter.Google.prototype.addControl=function(e){var t=e._toGoogle();if(t.obj instanceof i.Map.Control){this._map.controls[t.pos].push(t.obj);this._controls.push(e)}else{this._map.setOptions(t.obj);this._controls.push(e)}};i.Map.Adapter.Baidu.prototype.removeControl=function(e){this._map.removeControl(e._toBaidu());a(this._controls,e)};i.Map.Adapter.Google.prototype.removeControl=function(e){var t=e._toGoogle(),n,r;if(e instanceof i.Map.Control){n=this._map.controls[t.pos].getLength();for(r=0;r<n;r++){if(this._map.controls[t.pos].getAt(r)==e._toGoogle()){this._map.controls[t.pos].removeAt(r);a(this._controls,e)}}}else{for(r in t){if(t.hasOwnProperty(r)){if(true==t[r]){t[r]=false}}}this._map.setOptions(t);a(this._controls,e)}};i.Map.Adapter.Baidu.prototype.addOverlay=function(e){e._adapter="baidu";this._map.addOverlay(e._toBaidu(this))};i.Map.Adapter.Baidu.prototype.removeOverlay=function(e){this._map.removeOverlay(e._toBaidu(this))};i.Map.Adapter.Baidu.prototype.getPanes=function(){var e;e=this._map.getPanes();return{map:e.mapPane,markerShadow:e.markerShadow,markerPane:e.markerPane,floatShadow:e.floatShadow,markerMouseTarget:e.overlayMouseTarget,floatPane:e.floatPane}};i.Map.Adapter.Baidu.prototype.pointToPixel=function(e,t){return this._map.pointToOverlayPixel(e._toBaidu())};i.Map.Adapter.Baidu.prototype.addEventListener=e;i.Map.Adapter.Baidu.prototype.removeEventListener=t;i.Map.Adapter.Google.prototype.addEventListener=n;i.Map.Adapter.Google.prototype.removeEventListener=r;i.Map.Adapter.Google.prototype.addOverlay=function(e){var t=e._toGoogle(this);e._adapter="google";t.setMap(this._map)};i.Map.Adapter.Google.prototype.removeOverlay=function(e){var t=e._toGoogle(this);t.setMap(null)};i.Map.Adapter.Google.prototype.getPanes=function(){var e,t=0,n=this._overlays.length,r;for(var t=0;t<n;t++){if(this._overlays[t]){r=this._overlays[t]._toGoogle(this);if(!(r.getPanes&&r.getPanes())){continue}e=r.getPanes();return{map:e.mapPane,markerShadow:e.overlayShadow,markerPane:e.overlayImage,floatShadow:e.floatShadow,markerMouseTarget:e.overlayMouseTarget,floatPane:e.floatPane}}}return{}};i.Map.Adapter.Google.prototype.pointToPixel=function(e,t){var n=t.getProjection();return n.fromLatLngToDivPixel(e._toGoogle())};var l=function(){function t(e){return e*Math.PI/180}function n(n,r,i,s){var o=t(n);var u=t(i);var a=o-u;var f=t(r)-t(s);var l=2*Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2)+Math.cos(o)*Math.cos(u)*Math.pow(Math.sin(f/2),2)));l=l*e;return l}function r(e,t){var n=Math.pow(2,e.getZoom());var r=new google.maps.LatLng(e.getBounds().getNorthEast().lat(),e.getBounds().getSouthWest().lng());var i=e.getProjection().fromLatLngToPoint(r);var s=e.getProjection().fromLatLngToPoint(t);var o=new google.maps.Point(Math.floor((s.x-i.x)*n),Math.floor((s.y-i.y)*n));return o}function i(e,t,n){var r=e.getProjection();var i=Math.pow(2,e.getZoom());var s=new google.maps.LatLng((n||e.getBounds()).getNorthEast().lat(),(n||e.getBounds()).getSouthWest().lng());var o=e.getProjection().fromLatLngToPoint(s);var u=new google.maps.Point(t.x/i+o.x,t.y/i+o.y);var a=e.getProjection().fromPointToLatLng(u);return a}var e=6378.137;return{calDistance:n,getGPix:r,getGLatLng:i}}()})()}(t.exports,t,e);e.____MODULES["34e814670e74b19de1c6553b8188f327"]=t.exports})(this);(function(e){var t={id:"b2bd20ce8abfb5f44654103deab53ed9",filename:"MapLoader.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function c(e,t){if(!f[e]){f[e]=new l(e)}f[e].load(function(){t(e)})}var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];e.____MODULES["34e814670e74b19de1c6553b8188f327"];var s=i.QMap;var o=window;var u=(o.__BAIDU_URL__||"https://api.map.baidu.com/api")+"?v=2.0&ak=ZAwlP8RG0tengGxBZerHUXHg&s=1";var a=o.__GOOGLE_URL__||"http://maps.google.cn/maps/api/js?v=3.9&key=AIzaSyDsv6Wsc_53sZOEf3jaxiZgNPw_6ptXC5U&sensor=false&libraries=places";var f={baidu:null,google:null};o.MapLoadCallback={};var l=function(e){this.loading=false;this.loaded=false;this._url=e==="google"?a:u;this._callbacks=[]};l.prototype.load=function(e){var t=this;var n="map_load_callback_"+(new Date).getTime();if(t.loaded){e();return}else{t._callbacks.push(e)}if(t.loading){return}o.MapLoadCallback[n]=function(){t.loading=false;t.loaded=true;var e=t._callbacks;var r;while(r=e.shift()){r()}try{o.MapLoadCallback[n]}catch(i){}};t.loading=true;var r=this._url+"&callback=MapLoadCallback."+n;i.loadJS(r)};n.exports=c}(t.exports,t,e);e.____MODULES["b2bd20ce8abfb5f44654103deab53ed9"]=t.exports})(this);(function(e){var t={id:"d1851a091cb747925eced770857a1525",filename:"MapLine.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=function(e,t){var n=[];for(var r=0;r<e.length-1;r++){var s=new i.Map.Overlay.Polyline([e[r],e[r+1]],{strokeColor:t&&t.color||"#fd517b",strokeOpacity:t&&t.opacity||.9,strokeWeight:t&&t.weight||3});n.push(s)}return n};n.exports=s}(t.exports,t,e);e.____MODULES["d1851a091cb747925eced770857a1525"]=t.exports})(this);(function(e){var t={id:"85c18fa40cbfdf6080eb888b5fe944ca",filename:"MapDest.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function l(e){var t=o.getCityIds();if(!t.length){e();return}s.get(f+t.join(","),function(t){if(!t.errcode){var n=t.data;var r=false;var s=i.map(n,function(e,t){if(e.abroad){r=true}return{cityId:e.id,name:e.name,distType:e.distType,abroad:e.abroad,days:e.days,lat:e.lat,lng:e.lng}});var o={is_abroad:r,dest:s};e(o)}else{a.showInfo(t.errmsg||"请求失败");a.hideInfo(3e3)}},function(e){a.showInfo("请求失败");a.hideInfo(3e3)})}var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=e.____MODULES["88d5c499e26b6f8fc86d873910ae3aea"];var o=e.____MODULES["9e2717a0ddb552d5511cab6947bdfe87"];var u=e.____MODULES["cca8bfa16c042ce6eb4021cac0c04274"];var a=e.____MODULES["c51777e35917abcb15bcf62b870b9df9"];var f=u.DEST_INFO.CITY_LOCATION;n.exports={getDests:l}}(t.exports,t,e);e.____MODULES["85c18fa40cbfdf6080eb888b5fe944ca"]=t.exports})(this);(function(e){var t={id:"352d5b4c2a666a1cf9918d96eb51eac8",filename:"hogan-2.0.0-fixed-1.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){window.Hogan={};(function(e,t){function n(e,t,n,r){function i(){}function s(){}i.prototype=e;s.prototype=e.subs;var o;var u=new i;u.subs=new s;u.subsText={};u.ib();for(o in t){u.subs[o]=t[o];u.subsText[o]=r}for(o in n){u.partials[o]=n[o]}return u}function f(e){return String(e===null||e===undefined?"":e)}function l(e){e=f(e);return a.test(e)?e.replace(r,"&amp;").replace(i,"&lt;").replace(s,"&gt;").replace(o,"&#39;").replace(u,"&quot;"):e}e.Template=function(e,t,n,r){e=e||{};this.r=typeof e==="function"?e:e.code||this.r;this.c=n;this.options=r;this.text=t||"";this.partials=e.partials||{};this.subs=e.subs||{};this.ib()};e.Template.prototype={r:function(e,t,n){return""},v:l,t:f,render:function(t,n,r){return this.ri([t],n||{},r)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var r=this.partials[e];var i=t[r.name];if(r.instance&&r.base==i){return r.instance}if(typeof i=="string"){if(!this.c){throw new Error("No compiler available.")}i=this.c.compile(i,this.options)}if(!i){return null}this.partials[e].base=i;if(r.subs){i=n(i,r.subs,r.partials,this.text)}this.partials[e].instance=i;return i},rp:function(e,t,n,r){var i=this.ep(e,n);if(!i){return""}return i.ri(t,n,r)},rs:function(e,t,n){var r=e[e.length-1];if(!c(r)){n(e,t,this);return}for(var i=0;i<r.length;i++){e.push(r[i]);n(e,t,this);e.pop()}},s:function(e,t,n,r,i,s,o){var u;if(c(e)&&e.length===0){return false}if(typeof e=="function"){e=this.ms(e,t,n,r,i,s,o)}u=!!e;if(!r&&u&&t){t.push(typeof e=="object"?e:t[t.length-1])}return u},d:function(e,t,n,r){var i=e.split("."),s=this.f(i[0],t,n,r),o=null;if(e==="."&&c(t[t.length-2])){return t[t.length-1]}for(var u=1;u<i.length;u++){if(s&&typeof s=="object"&&s[i[u]]!=null){o=s;s=s[i[u]]}else{s=""}}if(r&&!s){return false}if(!r&&typeof s=="function"){t.push(o);s=this.mv(s,t,n);t.pop()}return s},f:function(e,t,n,r){var i=false,s=null,o=false;for(var u=t.length-1;u>=0;u--){s=t[u];if(s&&typeof s=="object"&&s[e]!=null){i=s[e];o=true;break}}if(!o){return r?false:""}if(!r&&typeof i=="function"){i=this.mv(i,t,n)}return i},ls:function(e,t,n,r,i){var s=this.options.delimiters;this.options.delimiters=i;this.b(this.ct(f(e.call(t,r)),t,n));this.options.delimiters=s;return false},ct:function(e,t,n){if(this.options.disableLambda){throw new Error("Lambda features disabled.")}return this.c.compile(e,this.options).render(t,n)},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");this.buf=[];return e}:function(){var e=this.buf;this.buf="";return e},ib:function(){this.buf=t?[]:""},ms:function(e,t,n,r,i,s,o){var u,a=t[t.length-1],f=e.call(a);if(typeof f=="function"){if(r){return true}else{u=this.activeSub&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text;return this.ls(f,a,n,u.substring(i,s),o)}}return f},mv:function(e,t,n){var r=t[t.length-1];var i=e.call(r);if(typeof i=="function"){return this.ct(f(i.call(r)),r,n)}return i},sub:function(e,t,n,r){var i=this.subs[e];if(i){this.activeSub=e;i(t,n,this,r);this.activeSub=false}}};var r=/&/g,i=/</g,s=/>/g,o=/\'/g,u=/\"/g,a=/[&<>\"\']/;var c=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}})(Hogan,true);(function(e){function u(e,t,n){return t.indexOf(e,n)}function f(t,n,r,i,s){var o=[],u=null,h,p,d;h=i[i.length-1];while((p=t[n++])!=null){if(h&&h.tag==="<"&&!(p.tag in a)){throw new Error("Illegal content in < super tag.")}if(e.tags[p.tag]<=e.tags["$"]||l(p,s)){i.push(p);d=f(t,n,p.tag,i,s);p.nodes=d.instructions;n=d.next}else if(p.tag==="/"){if(i.length===0){throw new Error("Closing tag without opener: /"+p.n)}u=i.pop();if(p.n!==u.n&&!c(p.n,u.n,s)){throw new Error("Nesting error: "+u.n+" vs. "+p.n)}u.end=p.i;return{instructions:o,next:n}}else if(p.tag==="\n"){p.last=t.length==0||t[0].tag=="\n"}o.push(p)}if(i.length>0){throw new Error("missing closing tag: "+i.pop().n)}return{instructions:o,next:n}}function l(e,t){for(var n=0,r=t.length;n<r;n++){if(t[n].o===e.n){e.tag="#";return true}}}function c(e,t,n){for(var r=0,i=n.length;r<i;r++){if(n[r].c===e&&n[r].o===t){return true}}}function h(e){var t=[];for(var n in e){t.push('"'+v(n)+'": function(c,p,t,i) {'+e[n]+"}")}return"{ "+t.join(",")+" }"}function p(e){var t=[];for(var n in e.partials){t.push('"'+v(n)+'":{name:"'+v(e.partials[n].name)+'", '+p(e.partials[n])+"}")}return"partials: {"+t.join(",")+"}, subs: "+h(e.subs)}function v(e){return e.replace(s,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(i,"\\r")}function m(e){return~e.indexOf(".")?"d":"f"}function g(e,t){var n="<"+(t.prefix||"");var r=n+e.n+d++;t.partials[r]={name:e.n,partials:{}};t.code.push('t.b(t.rp("'+v(r)+'",c,p,"'+(e.indent||"")+'"));');return r}function y(e,t){t.code.push("t.b(t.t(t."+m(e.n)+'("'+v(e.n)+'",c,p,0)));')}function b(e){return"t.b("+e+");"}var t=/\S/,n=/\"/g,r=/\n/g,i=/\r/g,s=/\\/g;var o="".trim?function(e){return e.trim()}:function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")};e.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12};e.scan=function(r,i){function v(){if(s.length>0){a.push({tag:"_t",text:s});s=""}}function m(){var n=true,r=e.tags;for(var i=c;i<a.length;i++){n=r[a[i].tag]<r["_v"]||a[i].tag=="_t"&&a[i].text.match(t)===null;if(!n){return false}}return n}function g(e,t){v();if(e&&m()){for(var n=c,r;n<a.length;n++){if(a[n].text){if((r=a[n+1])&&r.tag==">"){r.indent=a[n].text.toString()}a.splice(n,1)}}}else if(!t){a.push({tag:"\n"})}f=false;c=a.length}function y(e,t){var n="="+p,r=e.indexOf(n,t),i=o(e.substring(e.indexOf("=",t)+1,r)).split(" ");h=i[0];p=i[1];return r+n.length-1}var s="",a=[],f=false,l=0,c=0,h="{{",p="}}",d=e.tags;if(i){i=i.split(" ");h=i[0];p=i[1]}var b,w,E,S,x,T,N,C,k;while(true){b=u(h,r,l);if(l!==b){N=b===-1?r.substring(l):r.substring(l,b);E=-1;while(true){S=N.indexOf("\n",E+1);if(S!==-1){s=N.substring(E+1,S);g(f);E=S}else{s=N.substring(E+1);break}}v()}if(b===-1){g(f,true);break}l=b+h.length;x=r.charAt(l),C=d[x],k=C?x:"_v";if(k==="="){l=y(r,l-1)+1;f=l-1}else{if(C)l++;T=k==="{"?"}"+p:p;w=u(T,r,l);f=l-1;a.push({tag:k,n:o(r.substring(l,w)),otag:h,ctag:p,i:k==="/"?f-h.length:w+T.length});l=w+T.length}}return a};var a={_t:true,"\n":true,$:true,"/":true};e.stringify=function(t,n,r){return"{code: function (c,p,i) { "+e.wrapMain(t.code.join(""))+" },"+p(t)+"}"};var d=0;e.generate=function(t,n,r){d=0;var i={code:[],subs:{},partials:{}};e.walk(t,i);if(r.asString){return this.stringify(i,n,r)}return this.makeTemplate(i,n,r)};e.wrapMain=function(e){return'var t=this;t.b(i=i||"");'+e+"return t.fl();"};e.template=e.Template;e.makeTemplate=function(e,t,n){var r=this.makePartials(e);r.code=new Function("c","p","i",this.wrapMain(e.code.join("")));return new this.template(r,t,this,n)};e.makePartials=function(e){var t,n={subs:{},partials:e.partials,name:e.name};for(t in n.partials){n.partials[t]=this.makePartials(n.partials[t])}for(t in e.subs){n.subs[t]=new Function("c","p","t","i",e.subs[t])}return n};e.codegen={"#":function(t,n){n.code.push("if(t.s(t."+m(t.n)+'("'+v(t.n)+'",c,p,1),'+"c,p,0,"+t.i+","+t.end+',"'+t.otag+" "+t.ctag+'")){'+"t.rs(c,p,"+"function(c,p,t){");e.walk(t.nodes,n);n.code.push("});c.pop();}")},"^":function(t,n){n.code.push("if(!t.s(t."+m(t.n)+'("'+v(t.n)+'",c,p,1),c,p,1,0,0,"")){');e.walk(t.nodes,n);n.code.push("};")},">":g,"<":function(t,n){var r={partials:{},code:[],subs:{},inPartial:true};e.walk(t.nodes,r);var i=n.partials[g(t,n)];i.subs=r.subs;i.partials=r.partials},$:function(t,n){var r={subs:{},code:[],partials:n.partials,prefix:t.n};e.walk(t.nodes,r);n.subs[t.n]=r.code.join("");if(!n.inPartial){n.code.push('t.sub("'+v(t.n)+'",c,p,i);')}},"\n":function(e,t){t.code.push(b('"\\n"'+(e.last?"":" + i")))},_v:function(e,t){t.code.push("t.b(t.v(t."+m(e.n)+'("'+v(e.n)+'",c,p,0)));')},_t:function(e,t){t.code.push(b('"'+v(e.text)+'"'))},"{":y,"&":y};e.walk=function(t,n){var r;for(var i=0,s=t.length;i<s;i++){r=e.codegen[t[i].tag];r&&r(t[i],n)}return n};e.parse=function(e,t,n){n=n||{};return f(e,0,"",[],n.sectionTags||[]).instructions};e.cache={};e.cacheKey=function(e,t){return[e,!!t.asString,!!t.disableLambda].join("||")};e.compile=function(t,n){n=n||{};var r=e.cacheKey(t,n);var i=this.cache[r];if(i){return i}i=this.generate(this.parse(this.scan(t,n.delimiters),t,n),t,n);return this.cache[r]=i}})(Hogan)}(t.exports,t,e);e.____MODULES["352d5b4c2a666a1cf9918d96eb51eac8"]=t.exports})(this);(function(e){var t={id:"3eab014e76bc87950932879578be9a36",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){e.____MODULES["352d5b4c2a666a1cf9918d96eb51eac8"]}(t.exports,t,e);e.____MODULES["3eab014e76bc87950932879578be9a36"]=t.exports})(this);(function(e){var t={id:"d54d7f1fe886fa1c6e3a0c84f273f3da",filename:"MapMarker.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];e.____MODULES["3eab014e76bc87950932879578be9a36"];var s=window.Hogan;var o='<div class="b_mark_popup m_mark" style="color:red;">                        <a href="javascript:;" class="mkcont">                        <span class="bm_tri"></span>                        <span class="bm_title"><em class="ind">{{indexStr}}</em><em class="all">{{name}}</em><em class="shut">{{s_name}}</em></span>                        </a>                   </div>';var u=s.compile(o);var a=500;var f=function(e,t,n){this.point=e;this._data=t;var r=this.parse(t,n);this._div_obj=$(u.render(r));this._div_obj.css({"z-index":a-n.toString().split(",")[0]});if(!r.image){this._div_obj.find("div.inner").css("padding","4px")}};f.prototype=new i.Map.Overlay;f.prototype.constructor=f;f.prototype.parse=function(e,t){var n={name:e.name,indexStr:t,s_name:i.subStr(e.name,8)};return n};f.prototype.onInit=function(e,t){var n=this.getPanes();(n.markerPane||n.overlayImage).appendChild(t._div_obj[0]);var r=e.pointToPixel(t.point,this);t._div_obj.css({left:r.x+"px",top:r.y+"px"});t._initEvents();return t._div_obj[0]};f.prototype.onDraw=function(e,t){var n=e.pointToPixel(t.point,this);t._div_obj.css({left:n.x+"px",top:n.y+"px"})};f.prototype._initEvents=function(){var e=this;var t=e._div_obj.css("z-index");e._div_obj.mouseenter(function(){e._div_obj.css("z-index",1e3).addClass("m_overing");e._div_obj.find("div.js_detail").show()}).mouseleave(function(){e._div_obj.css("z-index",t).removeClass("m_overing");e._div_obj.find("div.js_detail").hide()})};f.prototype.getDom=function(e){return this._div_obj};f.prototype.getPoint=function(){return this.point};n.exports=f}(t.exports,t,e);e.____MODULES["d54d7f1fe886fa1c6e3a0c84f273f3da"]=t.exports})(this);(function(e){var t={id:"07e67cebfa65f04dd7daf4c60777561d",filename:"MapView.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=e.____MODULES["a095de22ed4d682bf11f9da6451a2556"];var o=e.____MODULES["9e2717a0ddb552d5511cab6947bdfe87"];var u=e.____MODULES["b2bd20ce8abfb5f44654103deab53ed9"];var a=e.____MODULES["d1851a091cb747925eced770857a1525"];var f=e.____MODULES["85c18fa40cbfdf6080eb888b5fe944ca"];var l=e.____MODULES["d54d7f1fe886fa1c6e3a0c84f273f3da"];var c=$(window);var h=function(){var e=$("#qn_planmap");this.maps={baidu:null,google:null};this.init(e)};h.prototype={_HEAD_HEIGHT_:28,init:function(e){this.dom=e;this.b_map_dom=$(".b_map",this.dom);this.g_map_dom=$(".g_map",this.dom);this.initEvents();this._layoutWin()},initEvents:function(){var e=this;c.resize($.proxy(e._layoutWin,e));this.dom.delegate(".close_btn","click",function(){s.trigger("switch_store")})},_layoutWin:function(){var e=this;var t=c.height()-e._HEAD_HEIGHT_;var n={height:t};e.b_map_dom.css(n);e.g_map_dom.css(n)},renderMap:function(e){var t=this;t.mapType=(e?e.is_abroad?"google":"baidu":t.mapType)||"baidu";t.addMarks(e?e.dest:[])},addMarks:function(e){function n(t){function o(e,t){for(var n=0;n<e.length;n++){var r=e[n];var i=r.getPoint();if(i.getLat()==t.getLat()&&i.getLng()==t.getLng()){return r;break}}}var n=[];var r=[];i.forEach(e,function(e,r){var s=e.lng,u=e.lat,a=e.cityId,f=new i.Map.LatLng(u,s,type);n.push(f);var c=o(t.overlays,f);if(c){var h=c.getDom().find(".bm_title .ind");h.html(h.html()+","+(r+1))}var p=c||new l(f,e,r+1);t.addOverlay(p);t.overlays.push(p)});var s=a(n,{color:"#fd517b",opacity:.9,weight:3});i.forEach(s,function(e,n){t.overlays.push(e);t.addOverlay(e)});if(type==="google"){t.setViewport(n)}else{t.setViewport(n,{margins:[40,40,20,40]})}if(n.length==1){setTimeout(function(){t.setZoom(t.getZoom()-7<=0?2:t.getZoom()-7)},150)}}var t=this;type=t.mapType;t.switchMap(type);t.loadMap(type,function(){var r=t.getMap(type,type==="baidu"?t.b_map_dom:t.g_map_dom);t.clearMap();e&&e.length>0&&n(r)})},renderDest:function(){var e=this;var t=o.getCityList();var n=false;var r=[];var s=i.forEach(t,function(e,t){if(e.abroad){n=true}e.lat&&e.lng&&r.push(e)});var u={is_abroad:n,dest:r};e.renderMap(u)},loadMap:function(e,t){u(e,t)},getMap:function(e,t){var n=this.maps;if(!n[e]){var r=i.Map(e,t[0],{center:new i.Map.LatLng(35,110,e),zoom:5,draggable:true,scrollwheel:true});if(e==="baidu"){r.addControl(new i.Map.Control.Navigation(r,{style:BMAP_NAVIGATION_CONTROL_SMALL}))}else{r.addControl(new i.Map.Control.Navigation)}r.overlays=[];n[e]=r}return n[e]},switchMap:function(e){var t=this.b_map_dom,n=this.g_map_dom;if(e==="baidu"){t.show();n.hide()}else{n.show();t.hide()}this.cur_type=e},clearMap:function(){var e=this;for(var t in e.maps){(function(e){if(!e){return}var t=e.overlays;i.forEach(t,function(t){e.removeOverlay(t)});e.overlays=[]})(e.maps[t])}},show:function(){this.dom.show().removeClass("hidemap")},hide:function(){this.dom.addClass("hidemap")}};n.exports={getMapView:function(){var e=new h;return e}}}(t.exports,t,e);e.____MODULES["07e67cebfa65f04dd7daf4c60777561d"]=t.exports})(this);(function(e){var t={id:"43895a65f33fe787ba6e043c0f580251",filename:"MapApp.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function a(){if(!u){u=s.getMapView()}u.show();u.renderDest()}var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=e.____MODULES["07e67cebfa65f04dd7daf4c60777561d"];var o=e.____MODULES["a095de22ed4d682bf11f9da6451a2556"];var u;o.on("show_map",function(){u&&u.show()});o.on("hide_map",function(){u&&u.hide()});o.on("render_dest_in_map",a);n.exports=a}(t.exports,t,e);e.____MODULES["43895a65f33fe787ba6e043c0f580251"]=t.exports})(this);(function(e){var t={id:"a8d208d8caf61c8000916197cca54178",filename:"Mypaper.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];e.____MODULES["5d72c671ecbc8d42a368571bd4664162"];e.____MODULES["525e8dc17b8a8011c6f7f0bbe1f060c2"];e.____MODULES["edb44368d6da1ca32d60ffa026712ff5"];e.____MODULES["5d72c671ecbc8d42a368571bd4664162"];e.____MODULES["57fba5403d86ec71e90a9adf888fd38a"];var s=e.____MODULES["37f5dc95563b072239718144ea54c801"];var o=e.____MODULES["88d5c499e26b6f8fc86d873910ae3aea"];var u=e.____MODULES["41babe22ebb465e6e80fb775c91c4c90"];var a=e.____MODULES["f499f9cbe4503a398f85810d66af4579"];var f=e.____MODULES["9e2717a0ddb552d5511cab6947bdfe87"];var l=e.____MODULES["5671f406577a67004095dbd039efb412"];var c=e.____MODULES["a095de22ed4d682bf11f9da6451a2556"];var h=e.____MODULES["43895a65f33fe787ba6e043c0f580251"];var p=e.____MODULES["c51777e35917abcb15bcf62b870b9df9"];var d=$(window);var v=$("#qn_mypaper");document.domain="qunar.com";var m=f.max_city_len;var g={dom:v.find(".paper_placehoder"),show:function(){this.dom.show()},hide:function(){this.dom.hide()}};var y={dom:$("#mp_searchcity"),holder:null,searcher:null,scInput:null,init:function(){this.tip=$('<div class="fulltip">您已达到最大限制'+m+"个城市</div>").hide();this.searcher=this.dom.find(".searchcity");this.holder=this.dom.find(".holder");this.scInput=this.dom.find(".searchcity .sctext");this.dom.append(this.tip);this.initEvent()},initEvent:function(){var e=this;e.holder.click(function(){e.holder.hide();e.searcher.show();e.scInput.focus()});e.scInput.qdeleteinput({customClass:"cyinput_empty"})},initSearch:function(){var e=this;var t=e.scInput;a({el:t,enterFn:function(e,t){if(t!=13&&t!=null){return}var n={name:e.city,cityId:e.id,distType:e.distType,abroad:e.abroad,days:e.trDays||1,lat:e.lat,lng:e.lng};u("add_city");var r=c.trigger("add_city",n);r[0]&&c.trigger("add_city_success",n)}});t.bind("keydown focus",function(){E.scroller.setScrollToEnd()})},empty:function(){this.scInput.val("")},hide:function(){this.tip.show();this.holder.hide();this.searcher.hide()},show:function(){this.tip.hide();this.holder.show();this.searcher.hide()}};var b={dom:v.find(".mp_foot .nextbtn"),init:function(e){var t=e.hasCity,n=e.cbFn;this.dom.click(function(){var e=$(this).hasClass("button_disable");!e&&n&&n()})},unable:function(){b.dom.addClass("button_disable")},able:function(){b.dom.removeClass("button_disable")}};var w=function(){var e=function(e,t,n){this.opt=n;this.days=e.days||1;this.dom=$('<a class="city_tr" href="javascript:;" style="display:none;" data-cid="'+e.cityId+'"><strong class="icity">'+i.HTMLEncode(e.name)+'</strong><span class="del">删除</span><span class="days"><em class="reduce" data-beacon="reduce_day"></em><em class="num"><b>1</b>天</em><em class="add" data-beacon="add_day"></em></span></a>');this.daysDom=this.dom.find(".num b");this.data=e;this.index=t;this.reduce=this.dom.find(".reduce");this.add=this.dom.find(".add");this.del=this.dom.find(".del");this.dom.data("ind",t);this.init();this.initEvent();this.dom.data("obj",this)};e.prototype={init:function(){var e=this;e.refreshDayStatus();e.initDrag()},initEvent:function(){var e=this;e.dom.bind("mouseleave",function(){e.del.hide()}).bind("mouseenter",function(){e.del.show()});e.del.bind("mousedown",function(){return false}).bind("click",$.proxy(e.remove,e));e.reduce.bind("mousedown",function(){return false}).bind("click",function(){if($(this).hasClass("disable")){return false}e.days--;e.refreshDayStatus($(this));c.trigger("update_city_byind",e.index,e.data)});e.add.bind("mousedown",function(){return false}).bind("click",function(){if($(this).hasClass("disable")){return false}e.days++;e.refreshDayStatus($(this));c.trigger("update_city_byind",e.index,e.data)})},initDrag:function(){var e=this;e.drag=l($.extend({},e.opt,{proxy_dom:e.dom}))},remove:function(){u("delete_city");var e=this.index;this.dom.remove();var t=c.trigger("remove_city",e);if(t[0]){c.trigger("remove_city_success",e);c.trigger("citys_num_change")}},resetIndex:function(e){this.index=e;this.dom.data("ind",e)},refreshDayStatus:function(e){if(e&&e.hasClass("disable")){return}var t=this;t.days=t.days>20?20:t.days;t.days=t.days<=0?1:t.days;t.daysDom.html(t.days);t.reduce.removeClass("disable");t.add.removeClass("disable");t.days==1&&t.reduce.addClass("disable");t.days==20&&t.add.addClass("disable");t.data.days=t.days}};return e}();var E={_MYPAPER_TOP_DIFF:208,wrap:$("#qn_mypaper"),cont:null,founder:y,placeHolder:g,stTrig:b,startDateDom:null,cityBox:null,hasCity:false,citys:[],cityItemHeight:50,scroller:null,init:function(){var e=this;e.cont=this.wrap.find(".mp_cont");e.viewmap_btn=this.wrap.find(".viewmap_btn");e.cityBox=this.wrap.find(".mycity");e.startDateDom=this.wrap.find(".date_start .sctext");e.founder.init();e.founder.initSearch();e.stTrig.init({startDateDom:e.startDateDom,hasCity:e.hasCity,cbFn:function(){u("editor");e.submitMyPaper()}});e.city_drag_pro=e.initDrag();e.displayCitys();e.initScroll();e.layoutWin();e.mapIsOpen=false;e.render_in_map=false;c.on("switch_map",function(){e.mapIsOpen=true;c.trigger("hide_store");c.trigger("show_map");if(!e.render_in_map){c.trigger("render_dest_in_map");e.render_in_map=true}u("look_map");e.viewmap_btn.text("关闭地图")});c.on("switch_store",function(){e.mapIsOpen=false;u("close_map");c.trigger("hide_map");c.trigger("show_store");e.viewmap_btn.text("查看地图")});e.viewmap_btn.bind("click",function(){if(!e.mapIsOpen){c.trigger("switch_map")}else{c.trigger("switch_store")}});d.bind("resize",$.proxy(e.layoutWin,e));c.on("citys_num_change",$.proxy(e.citysChange,e));c.on("remove_city_success",$.proxy(e.removeAfter,e));c.on("add_city_success",$.proxy(e.addCity,e));c.trigger("citys_num_change")},layoutWin:function(){var e=this;var t=e.cont;t.css({height:d.height()-e._MYPAPER_TOP_DIFF+"px"});var n=t.data("scroller");n&&n.getSlider().height(0);n&&n.setBarHeight()},sortCity:function(){var e=this;var t=e.cont.find(".city_tr");var n=[];var r=i.map(t,function(e,t){var r=$(e),i=r.data("obj");i.resetIndex(t);n.push(i.data);return i});e.citys=r;f.setCityList(n);c.trigger("render_dest_in_map")},initDrag:function(){var e=this;var t=e.cont.find(".city_tr");var n=$("#qn_mypaper .mp_cont");var r;var i={group:e.citys,container:n,startFn:function(){},moveFn:function(t,i){var s=t;var o=i.left;var u=i.top;var a=n.width();var f=n.height();var l=15;var c=f-15;clearInterval(r);if(o>0&&o<a){if(u<l){r=setInterval(function(){e.scrollUp()},200)}else if(u+s.height()>c){r=setInterval(function(){e.scrollDown()},200)}}},endFn:function(){clearInterval(r);e.sortCity()}};return i},displayCitys:function(){var e=this;var t=f.getCityList();if(!t||!t.length){return}i.forEach(t,function(t,n){var r=new w(t,n,e.city_drag_pro);e.citys.push(r);e.putCityInDom(r.dom)})},putCityInDom:function(e){var t=this;this.cityBox.append(e);e.fadeIn();this.founder.empty();this.placeHolder.hide();this.canSubmit();this.hasCity=true;t.scroller&&t.scroller.setBarHeight()},addCity:function(e,t){var n=this;if(!t&&t!==0){t=f.getCityLength()-1}var r=new w(e,t,n.city_drag_pro);n.citys.push(r);n.putCityInDom(r.dom);n.viewmap_btn.show();c.trigger("citys_num_change");n.scroller&&n.scroller.setBarHeight();n.scroller&&n.scroller.setScrollToEnd();n.scroller&&n.scroller.enable()},removeAfter:function(e){var t=this;t.scroller&&t.scroller.setBarHeight();t.citys.splice(e,1);var n=t.citys.length;if(!n){t.placeHolder.show();t.unSubmit();t.hasCity=false;t.viewmap_btn.hide()}else{t.resetCitysIndex()}},resetCitysIndex:function(){var e=this;i.forEach(e.citys,function(e,t){e.resetIndex(t)})},submitMyPaper:function(){var e=this;var t=f.getCityList();var n=f.getStartDate();var r=i.map(t,function(e){return{n:e.name,i:e.cityId,distType:e.distType,days:e.days}});var u=JSON.stringify(r);o.ajax({url:"/travelbook/plan?csrfToken="+i.UserInfo._getCookie("csrfToken"),type:"post",async:false,data:{info:u,startdate:n},success:function(t){if(t.errcode==0){f.removeData();var n=window.location.protocol+"//travel.qunar.com/plan/"+t.data.bookId+"/edit?csrfToken="+i.UserInfo._getCookie("csrfToken");window.location.assign(n);return false}else{e.showMsg("请求失败，请重新尝试")}},error:function(t){if(t.errcode==7){if(s.getUserId()){e.showMsg("请求失败，请重新尝试");return}e.showLogin()}else if(t.errcode===14){LoginDialog.showModileDialog()}else{e.showMsg(t.errmsg)}}})},showLogin:function(){var e=this;i.loadModule("login_panel",function(){loginDialog=new LoginDialog({callbackFun:function(t){var n=t.errcode;if(n===0){e.submitMyPaper()}else{e.showMsg(t.errmsg)}},callback:window.location.href});loginDialog.show()})},showMsg:function(e){p.showInfo(e||"请求失败");p.hideInfo(3e3)},hideTopLayer:function(){var e=this;e.cont.find(".sctext").trigger("blur")},citysChange:function(){var e=this,t=e.citys.length;e.render_in_map=false;if(f.isFull()){e.founder.hide()}else{e.founder.show()}e.render_in_map=false;if(!t){e.mapIsOpen&&c.trigger("switch_store")}else{e.mapIsOpen&&c.trigger("render_dest_in_map");e.mapIsOpen&&(e.render_in_map=true)}},unSubmit:b.unable,canSubmit:b.able};i.mix(E,{initScroll:function(){var e=this;e.scroller=new i.ScrollBar({gap:15,win:e.cont,content:e.cont.find(".mp_cont_inner"),events:{scroll:function(){e.hideTopLayer()}}});e.cont.data("scroller",e.scroller)},scrollUp:function(){var e=this;e.scroller.scroll(15)},scrollDown:function(){var e=this;e.scroller.scroll(-15)}});n.exports=E}(t.exports,t,e);e.____MODULES["a8d208d8caf61c8000916197cca54178"]=t.exports})(this);(function(e){var t={id:"f3a70949d66a5dac19d321c4bb9e82f8",filename:"HashParams.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){var r={};QNR.HashParams={get:function(){var e="#"+(window.location.href.split("#")[1]||""),t={};var n=e.replace(/.*?#.*?!*/,"");QNR.forEach(n.split("&"),function(e){var n=e.split("=");if(n[1]){t[n[0]]=decodeURIComponent(n[1])}});return t},set:function(e,t){if(t===""||t==null){delete r[e]}else if(QNR.type(e)==="object"){for(var n in e){r[n]=encodeURIComponent(e[n])}}else if(QNR.type(e)==="string"){r[e]=encodeURIComponent(t)}location.hash=function(){html=[];for(var e in r){html.push(e+"="+r[e])}if(html[0]){return"#!"+html.join("&")}return""}()}};t.exports=QNR.HashParams}(t.exports,t,e);e.____MODULES["f3a70949d66a5dac19d321c4bb9e82f8"]=t.exports})(this);(function(e){var t={id:"0f79dcddc38b33fb453eb15ada9cf224",filename:"tab.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){var r=function(){function e(e){this.option=e;this.box=e.box;this.titsBox=$(this.option.titsBox,this.box);this.contsBox=$(this.option.contsBox,this.box);this.titCurClass=e.titCurClass||"current";this.contCurClass=e.contCurClass;this.iniOpenIndex=e.initOpenIndex;this.navHtml=e.navHtml;this.conHtml=e.conHtml;this.openCb=e.openCb;this.init();this.initEvent()}e.prototype={init:function(){this.tits=$(this.option.tits,this.box);this.conts=$(this.option.conts,this.box)},initEvent:function(){var e=this;e.tits.bind("click",function(){var t=$(this).index();e.openTab(t)});if(!e.tits.length||!e.iniOpenIndex&&e.iniOpenIndex!=0){return}e.openTab(e.iniOpenIndex)},openTab:function(e){var t=this;var n=t.tits.eq(e);var r=t.conts.eq(e);n.show().addClass(t.titCurClass).siblings().removeClass(t.titCurClass);r.addClass(t.contCurClass).siblings().removeClass(t.contCurClass);t.openCb&&t.openCb(n,r,e)},addTab:function(e,t,n){var r=this;if(e>=r.tits.length){r.titsBox.append($(r.navHtml).append(t));r.contsBox.append($(r.conHtml).append(n))}else{r.tits.eq(e).before($(r.navHtml).append(t));r.conts.eq(e).before($(r.conHtml).append(n))}r.refresh()},refresh:function(){var e=this;e.tits.unbind("click");e.init();e.initEvent()},refreshCont:function(e,t,n){me.tits.eq(e).html(t);me.conts.eq(e).html(n)},removeTab:function(e){var t=this;t.tits.eq(e).remove();t.conts.eq(e).remove();t.init();t.openTab(0)}};return e}();t.exports=r}(t.exports,t,e);e.____MODULES["0f79dcddc38b33fb453eb15ada9cf224"]=t.exports})(this);(function(e){var t={id:"067e5b01b976f2d58d65d6c47a9820e8",filename:"DestQuest.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function u(e){var t=e.url,n=e.data,r=e.successFn;s.get(t,n,function(e){if(e.errcode!=0||!e.data){var t="没有数据";if(e.errcode!=0){t=e.errmsg}o.showInfo(t||"请求失败");o.hideInfo(3e3);return false}r&&r(e.data)},function(){o.showInfo("请求失败");o.hideInfo(3e3)})}var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=e.____MODULES["88d5c499e26b6f8fc86d873910ae3aea"];var o=e.____MODULES["c51777e35917abcb15bcf62b870b9df9"];n.exports=u}(t.exports,t,e);e.____MODULES["067e5b01b976f2d58d65d6c47a9820e8"]=t.exports})(this);(function(e){var t={id:"cd419e63ffcb1b0c98784c42ddedb3df",filename:"Dest.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];var s=e.____MODULES["067e5b01b976f2d58d65d6c47a9820e8"];var o=e.____MODULES["cca8bfa16c042ce6eb4021cac0c04274"];var u=o.SEARCH_URI;var a=o.SEARCH_HOME_DEST_URI;var f=e.____MODULES["9e2717a0ddb552d5511cab6947bdfe87"];e.____MODULES["3eab014e76bc87950932879578be9a36"];var l=window.Hogan;var c=function(){function n(t,n){var r=e[n],i=l.compile(u),s=l.compile(a),o="";if(t=="300667"||n==5){o=s.render({distId:t})}else{o=i.render({distId:t,distType:r})}if(r!=6){o=o+"&sub_dist_type="+r}if(r==6&&n==7){o=o+"&distType="+n}return o}function r(r){var i=r.distId,s=r.distType,o=r.distName,u=r.url;this.limit=24;this.offset=0;var a=e[s],f=t[a];this.url=u||n(i,s)}var e={5:6,3:6,1:3,0:3,6:6,4:6,7:6};var t={6:'<span class="status">已选择</span><a href="javascript:;" class="sel">选择</a>',3:'<a class="serc" href="javascript:;">查看</a>'};r.prototype={load:function(e){var t=this;s({url:t.url,data:{limit:t.limit,offset:t.offset},successFn:function(n){function r(e){return e&&i.map(e||[e],function(e){return new h(e)})||[]}function s(e){if(!i.isArray(e)&&e){e=[e]}return e&&i.map(e,function(e){return new p(e)})||[]}t.offset=t.offset+t.limit;var o=r(n.hotNav),u=s(n.searchResult),a=s(n.district),f=s(n.relatedDists),l=s(n.browsed),c=s(n.related);e&&e(o,u,a,f,l,c)}})},reset:function(e,t){this.url=n(e,t);this.offset=0}};return r}();var h=function(){function e(e){this.dom=$(filterItem_tpl.render(e))}filterItem_tpl=l.compile('<a class="nav" href="javascript:;" data-id="{{distId}}" data-type="{{distType}}">{{distName}}</a>');return e}();var p=function(){function n(t){return i.indexOf(e,t)>-1?true:false}function r(e){this.data=e;this.data=$.extend(e,{headImage:e.headImage||e.image});this.distType=e.distType;this.distId=e.id;this.tpl=t[n(this.distType)?"city":"other"];this.init()}var e=[6,7];var t={city:l.compile('<li class="dest_item">            <img src="{{headImage}}">            <span class="btm"></span>            <span class="tit">{{name}}</span>            <span class="bg"></span><span class="status">已选择</span><a href="javascript:;" class="sel">选择</a>        </li>'),other:l.compile('<li class="dest_item">            <img src="{{headImage}}">            <span class="btm"></span>            <span class="tit">{{name}}</span>            <span class="bg"></span><a class="serc" href="javascript:;">查看</a>        </li>')};r.prototype={init:function(){var e=this;e.render();e.refreshStatus();e.dom.bind("refreshStatus",$.proxy(this.refreshStatus,this));e.dom.mouseenter(function(){e.dom.addClass("dest_item_hover")}).mouseleave(function(){e.dom.removeClass("dest_item_hover")})},render:function(){this.dom=$(this.tpl.render(this.data));this.dom.data("data",this.data);this.dom.data("distObj",this)},refreshStatus:function(){var e=this;if(e.distType==6){f.hasCityId(e.distId)?e.dom.addClass("seled"):e.dom.removeClass("seled")}}};return r}();n.exports=c}(t.exports,t,e);e.____MODULES["cd419e63ffcb1b0c98784c42ddedb3df"]=t.exports})(this);(function(e){var t={id:"041cbc7a84b01624e82163ddaba7b558",filename:"Store.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function b(e){var t=$(this);var n=t.offset();var r={top:n.top+"px",left:n.left+"px",width:t.width(),height:t.height(),position:"absolute",zIndex:3e3};var i=$("#mp_searchcity").offset();var s={top:Math.min(i.top,c.height())+"px",left:i.left+"px",width:"40px",height:"40px",opacity:0};var o=$("<div></div>").append(t.find("img").clone()).css(r);$("body").append(o);var u=arguments;o.animate(s,600,function(){o.remove();e&&e()})}var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];e.____MODULES["f3a70949d66a5dac19d321c4bb9e82f8"];var s=e.____MODULES["41babe22ebb465e6e80fb775c91c4c90"];var o=e.____MODULES["0f79dcddc38b33fb453eb15ada9cf224"];var u=e.____MODULES["a095de22ed4d682bf11f9da6451a2556"];var a=e.____MODULES["cd419e63ffcb1b0c98784c42ddedb3df"];var f=e.____MODULES["9e2717a0ddb552d5511cab6947bdfe87"];var l=e.____MODULES["cca8bfa16c042ce6eb4021cac0c04274"];var c=$(window);var h=107;var p=false;var d=$(".b_books_shortcut").length;var v=false,m=false;var g={opt_0:{url:l.RECOMMEND_CITYS,fillTabIndex:0,districtBox:$('<div class="rightcitys"><ul class="listunit"></ul></div>'),renderInDom:function(e,t){var n=this,r=[];var s=i.expand([e,t]);n.likeData=n.likeData||s;n.hasPrepareData=n.likeData.length?true:false;n.loaded_like_data=m=true;n.canContinue=false;n.likeData.length&&r.push({box:n.districtBox,list:n.likeData})&&n.container.append(n.districtBox);n.renderList(r);n.renderAfter&&n.renderAfter()},onInnerScroll:function(){var e=this;e.initScroll(e.wrap,e.container)},renderAfter:function(){var e=this;if(e.likeData.length){w.tabs.tits.eq(0).removeClass("hide");v=true;!p&&u.trigger("open_store_like")}else{e.openFail()}},openFail:function(){var e=this;v=false;!p&&u.trigger("open_store_guonei")}},opt_1:{distId:300667,distType:3,distName:"全部",fillTabIndex:1,filterBox:$('<div class="filter clrfix"><a class="current nav" href="javascript:;" data-id="300667" data-type="3">全部</a></div>'),contBox:$('<div class="distgroup">                    <div class="distgroupinner">                        <div class="listbox"><ul class="listunit"></ul></div>                        <div class="b_loading hide"></div>                    </div>                 </div>'),renderInDom:function(e,t){var n=this,r=[];n.filterBox&&e.length&&r.push({box:n.filterBox,list:e})&&n.container.append(n.filterBox);n.contBox&&t.length&&r.push({box:n.contBox.find(".listunit").empty(),list:t})&&n.container.append(n.contBox);n.renderList(r)},onInnerScroll:function(){var e=this;e.filterBox&&e.contBox&&e.initScroll(e.contBox,e.contBox.find(".distgroupinner"))}},opt_2:{distId:0,distType:1,distName:"全部",fillTabIndex:2,filterBox:$('<div class="filter clrfix"><a class="current nav" href="javascript:;" data-id="0" data-type="1">全部</a></div>'),contBox:$('<div class="distgroup">                    <div class="distgroupinner">                        <div class="listbox"><ul class="listunit"></ul></div>                        <div class="b_loading hide"></div>                    </div>                 </div>'),renderInDom:function(e,t){var n=this,r=[];n.filterBox&&e.length&&r.push({box:n.filterBox,list:e})&&n.container.append(n.filterBox);n.contBox&&t.length&&r.push({box:n.contBox.find(".listunit").empty(),list:t})&&n.container.append(n.contBox);n.renderList(r)},onInnerScroll:function(){var e=this;e.filterBox&&e.contBox&&e.initScroll(e.contBox,e.contBox.find(".distgroupinner"))}},opt_3:{fillTabIndex:3,filterBox:"",contBox:$('<div class="distgroup"><div class="distgroupinner"><ul class="listunit"></ul><div class="b_loading hide"></div></div></div>'),districtBox:$('<div class="rightcitys"><ul class="listunit"></ul></div>'),relateBox:$('<div class="othercitys"><h4>去过<span class="disttit">哈尔滨</span>的小伙伴还去过</h4><ul class="listunit"></ul></div>'),renderInDom:function(e,t,n){var r=this,i=[];r.contBox&&e.length&&i.push({box:r.contBox.find(".listunit").empty(),list:e})&&r.container.append(r.contBox);r.districtBox&&t.length&&i.push({box:r.districtBox.find(".listunit").empty(),list:t})&&r.container.append(r.districtBox);r.relateBox&&n.length&&i.push({box:r.relateBox.find(".listunit").empty(),list:n})&&r.container.append(r.relateBox);r.renderList(i);var s=r.getDistTitInfo(e,t);r.renderAfter(s,$.proxy(r.autoSelCity,r,t))},getDistTitInfo:function(e,t){var n=this,r,i;if(!t.length&&e.length){var s=e[0].data;var o=s["shortDistrictId"].split(".");var u=function(e){for(var t=0;t<o.length;t++){if(o[t]==e){return t}}}(n.distId);r=s["shortDistrict"].split(".")[u]}else if(t.length){r=t[0].data["name"];i=t[0].data["distId"]}r=r||"查询结果";i=i||n.distId;return{name:r,cid:i}},onInnerScroll:function(){var e=this;e.initScroll(e.wrap,e.container)},renderAfter:function(e,t){var n=this,r=e.name,s=e.cid;n.relateBox.find(".disttit").text(r);i.HashParams.set("dist",s);n.renderCb&&n.renderCb(r);t&&t()},autoSelCity:function(e){var t=this;if(p&&e.length){if(d){u.on("add_city_in_plan",function(){t.districtBox.find(".dest_item").eq(0).trigger("click")})}else{t.districtBox.find(".dest_item").eq(0).trigger("click")}}p=false}}};var y=function(){function e(e){this.wrap=e;this.container=$('<div class="tabcont_item_inner"></div>');this.wrap.append(this.container);this.canContinue=true;this.renderCb=null}e.prototype={init:function(){this.destloader=new a({distId:this.distId,distType:this.distType,url:this.url});this.loadDest($.proxy(this.render,this));this.initEvent()},initEvent:function(){var e=this;e.filterBox&&e.filterBox.length&&e.filterBox.delegate(".filter .nav","click",function(){if(e.fillTabIndex==0){s("right_china_province")}else{s("right_world_province")}var t=$(this),n=$(this).data("id"),r=$(this).data("type");e.destloader.reset(n,r);e.canContinue=true;e.destloader.load(function(n,r){e.renderList({box:e.contBox.find(".listunit").html(""),list:r});e.resetScroller();t.addClass("current").siblings().removeClass("current")})});e.wrap.on("changeSize",$.proxy(e.changeSize,e))},loadDest:function(e){var t=this;t.destloader.load(e)},renderList:function(e){if(!i.isArray(e)){e=[e]}i.forEach(e,function(e){var t=e.list;var n=e.box;i.forEach(t,function(e){n.append(e.dom)})})},render:function(e,t,n,r,s,o){var u=this;if(t.length<(u.destloader.limit||n.length)){u.canContinue=false}else{u.canContinue=true}u.container.empty();var a=[];if(u.fillTabIndex==0){u.renderInDom(s,o)}else if(u.fillTabIndex==1||u.fillTabIndex==2){u.renderInDom(e,t)}else{u.renderInDom(t,n,r)}if(u.scroller){u.resetScroller()}else{u.initSize();u.onInnerScroll()}if(u.fillTabIndex==3){var f,l;if(!n.length&&t.length){var c=t[0].data;var h=c["shortDistrictId"].split(".");var d=function(e){for(var t=0;t<h.length;t++){if(h[t]==e){return t}}}(u.distId);f=c["shortDistrict"].split(".")[d]}else if(n.length){f=n[0].data["name"];l=n[0].data["distId"]}f=f||"查询结果";l=l||u.distId;p&&n.length&&u.districtBox.find(".dest_item").eq(0).trigger("click");p=false;u.relateBox.find(".disttit").text(f);i.HashParams.set("dist",l);u.renderCb&&u.renderCb(f)}},resetLoader:function(e,t){this.destloader.reset(e,t)},changeSize:function(){var e=this;e.wrap.css({height:c.height()-h+"px"});var t=e.filterBox;var n=t&&t.length&&t.outerHeight()||0;e.fillTabIndex>0&&e.fillTabIndex<3&&e.contBox.css({height:c.height()-h-n+"px"})},initSize:function(){this.changeSize()},initScroll:function(e,t){var n=this;n.scroller=new i.ScrollBar({gap:30,win:e,content:t,events:{scroll_end:function(t){var r=this;var i=r.getContent().height();if(n.canContinue){n.canContinue=false;n.destloader.load(function(t,i){if(i.length<n.destloader.limit){n.canContinue=false}else{n.canContinue=true}n.renderList({box:n.contBox.find(".listunit"),list:i});r.setBarHeight();e.trigger("mouseenter")})}}}})},resetScroller:function(){this.scroller&&this.scroller.reset()},setBarWithBox:function(){this.scroller&&this.scroller.getSlider().height(0);this.scroller&&this.scroller.setBarHeight()},setBarHeight:function(){this.scroller&&this.scroller.setBarHeight()}};return e}();var w={wrap:$("#qn_store"),box:$("#storetabwrap"),defaultDist:function(){var e=i.HashParams.get();var t=e&&e["dist"]||(window.DIST_ID>0?window.DIST_ID:null);return t}(),tabs:null,openTabIndex:null,openTabTit:null,init:function(){var e=this;e.initSwitch();c.resize($.proxy(e.resize,e));e.initEvent();e.preLoadLikeData();if(!e.defaultDist){!p&&u.trigger("open_store_like")}else{p=true;e.directSearch({distId:e.defaultDist,distName:"正在查询",distType:6})}},preLoadLikeData:function(){var e=this,t=e.tabs,n=t.tits,r=t.conts;t.openCb(n.eq(0),r.eq(0),0)},resize:function(){var e=this;e.tabs.conts.trigger("changeSize");var t=e.openTabTit.data("destcreater");t&&t.setBarWithBox()},initSwitch:function(){var e=this;var t=e.box;var n={box:t,titsBox:".store_tits",contsBox:".store_conts",tits:"a.tabtit_item",conts:".tabcont_item",titCurClass:"current",contCurClass:"tabcont_item_cur",navHtml:'<a href="javascript:;" class="tabtit_item"></a>',conHtml:'<div class="tabcont_item"></div>',openCb:function(t,n,r){r==0&&t.data("destcreater")&&s("guess");r==1&&s("right_china_tab");r==2&&s("right_world_tab");r==3&&s("right_search_tab");e.openTabTit=t;e.openTabIndex=r;if(!t.data("destcreater")){var i=new y(n);$.extend(i,g["opt_"+r]);t.data("destcreater",i);i.init()}else{var i=t.data("destcreater");i&&i.setBarWithBox()}}};var r=this.tabs=new o(n)},initEvent:function(){var e=this;e.box.delegate(".dest_item","click",function(){var t=this,n=$(this),r=n.data("data"),i=r.distType,o=r.id,a=r.name,l=r.trDays;var c={cityId:o,name:a,distType:i,abroad:r.abroad,days:l,lat:r.lat,lng:r.lng};var h=n.data("distObj");if(i==6||i==7){s("right_city_add");u.trigger("add_city",c,function(){var e=f.getCityList().length-1;b.call(t,function(){u.trigger("add_city_success",c,e)})})}else{s("right_world_country");e.directSearch({distName:a,distType:i,distId:o})}})},directSearch:function(e){var t=this;if((e.id||e.distId)==g["opt_1"].distId){t.tabs.openTab(1);return}var n=t.openTabIndex;t.oldOpenIndex=n;var r=3;var s=e.distName;var o=e.distType;var u=e.id||e.distId;var a=t.tabs.tits.eq(r).data("destcreater");if(!a){var f=t.tabs.tits.eq(r);f.append('<span class="q"></span><span class="del"></span>');var l=f.find(".del");f.data("del",l);f.bind("mouseenter",function(){f.hasClass("current")&&l.show()}).bind("mouseleave",function(){l.hide()}).bind("blur",function(){l.hide()});l.bind("click",function(){f.hide();if(t.oldOpenIndex==2){t.tabs.openTab(1)}else{if(!n){t.tabs.openTab(v?0:1)}else{t.tabs.openTab(t.oldOpenIndex)}}i.HashParams.set("dist","");return false});a=new y(t.tabs.conts.eq(r));$.extend(a,g["opt_"+r],{renderCb:function(e){t.tabs.tits.eq(r).find(".q").html(e||"加载失败")}});t.tabs.tits.eq(r).data("destcreater",a)}$.extend(a,{distId:u,distType:o,distName:s,canContinue:true});a.init();s&&a.relateBox.find(".disttit").html(s);t.tabs.openTab(r)},refreshSelStatus:function(){var e=this;var t=e.box.find(".dest_item");t.trigger("refreshStatus")},hide:function(){this.wrap.hide()},show:function(){this.wrap.show()}};u.on("direct_search",$.proxy(w.directSearch,w));u.on("refresh_sel_status",$.proxy(w.refreshSelStatus,w));u.on("hide_store",$.proxy(w.hide,w));u.on("show_store",$.proxy(w.show,w));u.on("open_store_guonei",function(){w.tabs.openTab(1)});u.on("open_store_like",function(){var e=w.tabs.tits.eq(0);m&&v&&w.tabs.openTab(0)});n.exports=w}(t.exports,t,e);e.____MODULES["041cbc7a84b01624e82163ddaba7b558"]=t.exports})(this);(function(e){var t={id:"aac9fbc9a7d0a56223b901f1e9d16a26",filename:"AreaSug.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function f(e){function f(e){var t=h(e);e=p(t);var n="";var i=e.index;var o="";if(e.distType==6||e.distType==7){var f='<a href="javascript:;" class="addbtn" data-id="'+e.id+'" data-name="'+e.city+'">添加</a>';var l=$(f);l.data("data",e);var c=$("<div></div>").append(l)}if(QNR.indexOf(s,i)>=0||i==0){var d=a;if(e.distType==6||e.distType==7){var v=i==0?r.length:r.length-1;var d=v*a}o='<div class="sug_type '+(i==0?"first_type":"")+'" style="position:absolute;line-height:'+d+'px">'+u[e.distType]+"</div>"}var m=[];var g=[];e.city?m.push(e.city):null;e.country?m.push(e.country):null;e.cityEnName?g.push(e.cityEnName):null;e.countryEnName?g.push(e.countryEnName):null;n=o+'</td><td><div class="sug_item item '+(i==0?"first_item":"")+'"><span class="ctext">'+QNR.HTMLEncode(m.join(","))+'</span><span class="etext">'+QNR.HTMLEncode(g.join(","))+"</span>"+(c?c.html():"")+"</div></td>";return n}function l(e){function u(e){if(t.indexOf(e)>=0){return true}else{return false}}r=e.data||[];var t=[6,7];var n=[];var i="";var o;s=[];for(var a=0,f=r.length;a<f;a++){r[a].index=a;var l=r[a].distType;if(l!=i&&(!u(l)||!u(i))){i=l;s.push(a)}var c=r[a];o=[c.city||c.country,c.distType||6].join("_");n[n.length]=o}return n}function c(e,t,r,i){n(e,t,r,i)}function h(e){var t;for(var n=0;n<r.length;n++){var i=r[n];if([i.city||i.country,i.distType||6].join("_")==e){t=n;break}}return t}function p(e){return r[e]}function d(e){return{distName:e.city||e.country,distId:e.id,distType:e.distType,days:e.trDays||1}}var t=e.el;var n=e.enterFn;var r="";var s=[];var v={customClass:"area_sug",ajax:{url:o.AREA,dataType:"jsonp",cache:false},render:f,reader:l,entercb:c};t.qplaceHolder({allBrowser:true,customClass:"area_placeholder"});var m=$.extend(e.on,{"q-suggest-user-action":function(e,n,r,i,s){var o=p(s.data("ind"));t.val(o.city||o.country);if((n.type==="mousedown"||i==13)&&s){c&&c(e,$(n.target),s,p(s.data("ind")))}}});i($.extend(v,e,{on:m}))}var i=e.____MODULES["fb6676bbeb3f7bf171ccf693306b1d38"];var s=e.____MODULES["cca8bfa16c042ce6eb4021cac0c04274"];var o=s.SUG_URLS;var u=s.DEST_TYPE;var a=50;n.exports=f}(t.exports,t,e);e.____MODULES["aac9fbc9a7d0a56223b901f1e9d16a26"]=t.exports})(this);(function(e){var t={id:"e13121ee3b37332d461ff5a12f813a3f",filename:"Search.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function f(e,t,n,r){var i=$(e.target);if(t.hasClass("addbtn")){var s={name:r.city||r.country,cityId:r.id,distType:r.distType,abroad:r.abroad,days:r.trDays||1,lat:r.lat,lng:r.lng};o("search_add");var u=a.trigger("add_city",s);u[0]&&a.trigger("add_city_success",s);i.val("");return false}else{if(r.distType==6){o("search_click_city")}else{o("search_click_country")}i.val(r.city_name);a.trigger("direct_search",r)}}var i=e.____MODULES["2a65ea94c2b49824e7e8a17b5f2548d4"];e.____MODULES["5d72c671ecbc8d42a368571bd4664162"];var s=e.____MODULES["88d5c499e26b6f8fc86d873910ae3aea"];var o=e.____MODULES["41babe22ebb465e6e80fb775c91c4c90"];var u=e.____MODULES["aac9fbc9a7d0a56223b901f1e9d16a26"];var a=e.____MODULES["a095de22ed4d682bf11f9da6451a2556"];e.____MODULES["3eab014e76bc87950932879578be9a36"];var l={scInput:$("#qn_store .sctext"),init:function(){var e=this.scInput;u({container:$("#searchwrap .area_sug_wrap"),el:e,width:"338px",enterFn:f});e.qdeleteinput({customClass:"areainput_empty"})}};n.exports=l}(t.exports,t,e);e.____MODULES["e13121ee3b37332d461ff5a12f813a3f"]=t.exports})(this);(function(e){var t={id:"c6e4ac0fac3a1f4fdc7b9b6044237195",filename:"dialog.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){if(window.__INITED__Dialog2nd){return}var r=function(e,t){var n=!!e.browser.msie,r=n&&e.browser.version==="6.0",i=e(t.document),s=e("body"),o=e(t);var u=16;var a=/mac/i.test(t.navigator.userAgent);var f=false;e(function(){s=e("body")});var l='<div class="dlg_mask"></div>',c='<div class="g_dlg_box"></div>';var h="dlg",p=0,d=0,v=1e5;var m={content:"",maskVisible:true,top:0,left:0,width:0,height:0,newMask:false,contentStyle:"",borderStyle:"",titleStyle:"",closeCls:"",closeBtn:{handler:function(e){e.close()}},hideCloseBtn:false};var g=function(e,t){var n={},r;for(r in t){if(t.hasOwnProperty(r)){n[r]=typeof e[r]!=="undefined"?e[r]:t[r]}}return n};var y=function(){var e=o;return{scrollTop:i.scrollTop(),scrollLeft:i.scrollLeft(),width:e.width(),height:e.height()}};var b="dlg_mask_";var w=function(){this.id=b+ ++p;this._dom=e('<div id="'+this.id+'" class="dlg_mask" style="z-index:'+ ++v+'"></div>');this._init()};w.prototype={_init:function(){s.append(this._dom);this._dom.hide();this._initEvents();this.adaptWin();if(this._needIframe()||true){this._createIframe()}},_initEvents:function(){var e=this},_createIframe:function(){this._iframe=e('<iframe class="dlg_miframe" frameborder="0" src="about:blank"></iframe>');this._dom.append(this._iframe)},addClass:function(e){this._dom.addClass(e)},_needIframe:function(){var n=!!t.ActiveXObject&&(r&&e("select").length||e("object").length);return n},adaptWin:function(){if(r){this._dom.css({top:i.scrollTop(),left:i.scrollLeft(),height:o.height(),width:o.width()})}},hide:function(){this._dom.hide();var t=e("html").css("overflow","");if(a==false){if(f){t.css("padding-right","0px")}}},show:function(){var t=this;var n=o.width();var r=e("html").css("overflow","hidden");var i=o.width();t._dom.show();if(a==false){if(n!=i){f=true;r.css("padding-right",u+"px")}}},getDom:function(){return this._dom},remove:function(){this._dom.remove()}};var E;var S=function(e){var t=e||{};this.config=g(t,m);this._init()};S.prototype={constructor:S,_init:function(){if(!this.config){return}this.id=h+ ++d;var e=this.config;if(e.newMask){this._mask=new w}else{if(!E){E=new w;this._mask=E}else{this._mask=E}}this._creatDialog();this._initEvents();this.inited=true},_initEvents:function(){function s(){if(r){t._dlg_container.css({top:i.scrollTop(),left:i.scrollLeft(),width:o.width(),height:o.height()})}else{t._dlg_container.css({width:o.width(),height:o.height()})}t.toCenter();t._mask.adaptWin()}var t=this,n=this.id;this._closeBtn.bind({click:function(n){n.preventDefault();e(t).trigger(":eventClose");t.config.closeBtn.handler.call(t,t)}});o.bind("resize."+n,s);t._unbindEvents=function(){o.unbind("resize."+n)};},_creatDialog:function(){var t=this.config;var n=this._dlg_container=e(c).attr("id",this.id).css("z-index",v+=10);if(t.content instanceof e){this._dialog=t.content}else{this._dialog=e(t.content)}var u=this._dialog;u.addClass("g_dlg_wrap_css3");n.html(u);this._content=e(".js_content",u);this._closeBtn=e(".js_close",u);s.append(n);if(t.hideCloseBtn){this._closeBtn.hide()}var a="fixed";if(r){n.css({top:i.scrollTop(),left:i.scrollLeft(),width:o.width(),height:o.height()});a="absoulte"}else{n.css({width:o.width(),height:o.height()})}u.css("position","absolute");this.setPos(a)},setPos:function(e){this._dlg_container.css("position",e)},getContainer:function(){return this._dlg_container},getContent:function(){return this._content},setContent:function(e){this._content.empty();this._content.html(e)},getCloseBtn:function(){return this._closeBtn},_setStyle:function(e,t){if(typeof t=="string"){if(n){e[0].style.cssText=t}else{e.attr("style",t)}}else{e.css(t)}},toCenter:function(){var e=y(),t=this._dialog.width(),n=this._dialog.height(),i=0,s=0;var o=Math.max(e.height/2-n/2>>0+i,0);var a=e.width/2-t/2>>0+s;if(r){a-=u/2}var f={left:a,top:o};this._dialog.css(f);return this},show:function(e,t){var n=this;if(n.config.maskVisible){n._mask.show()}n._dlg_container.css({width:o.width(),height:o.height()});n._dlg_container.show();n.toCenter();if(e){e.call(t||n,n)}n.showed=true;return this},close:function(e,t){var n=this;this._mask.hide();this._dlg_container.hide();if(e){e.call(t||n,n)}this.showed=false;return this},destory:function(){this.close();this._unbindEvents();this.config.newMask&&this._mask.remove();this._dlg_container.remove();this._dialog.remove();for(var e in this){delete this[e]}},getMask:function(){return this._mask}};S.prototype.In=S.prototype.show;S.prototype.out=S.prototype.close;S.prototype.hide=S.prototype.close;S.prototype.remove=S.prototype.destory;return S}(jQuery,window);window.TravelDialog2nd=r;window.__INITED__Dialog2nd=true;t.exports=r}(t.exports,t,e);e.____MODULES["c6e4ac0fac3a1f4fdc7b9b6044237195"]=t.exports})(this);(function(e){var t={id:"b5b8fd55ca562d4a45d8a12f6b9d8424",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["c6e4ac0fac3a1f4fdc7b9b6044237195"];n.exports=i}(t.exports,t,e);e.____MODULES["b5b8fd55ca562d4a45d8a12f6b9d8424"]=t.exports})(this);(function(e){var t={id:"a58c1acad08916deab0140209747c4d0",filename:"cookie.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){if(e.indexOf('"')===0){e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{e=decodeURIComponent(e.replace(t," "));return u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g;var u=e.cookie=function(t,s,a){if(s!==undefined&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires==="number"){var f=a.expires,l=a.expires=new Date;l.setTime(+l+f*864e5)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{};var h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("=");var m=r(v.shift());var g=v.join("=");if(t&&t===m){c=o(g,s);break}if(!t&&(g=o(g))!==undefined){c[m]=g}}return c};u.defaults={};e.removeCookie=function(t,n){if(e.cookie(t)===undefined){return false}e.cookie(t,"",e.extend({},n,{expires:-1}));return!e.cookie(t)}})(jQuery)}(t.exports,t,e);e.____MODULES["a58c1acad08916deab0140209747c4d0"]=t.exports})(this);(function(e){var t={id:"db62bc269e34459021d4fceeaa57308f",filename:"hogan-2.0.0.amd.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){window.Hogan={};(function(e,t){function a(e){return String(e===null||e===undefined?"":e)}function f(e){e=a(e);return u.test(e)?e.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(s,"&#39;").replace(o,"&quot;"):e}e.Template=function(e,n,r,i){this.r=e||this.r;this.c=r;this.options=i;this.text=n||"";this.buf=t?[]:""};e.Template.prototype={r:function(e,t,n){return""},v:f,t:a,render:function(t,n,r){return this.ri([t],n||{},r)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];if(!i){return""}if(this.c&&typeof i=="string"){i=this.c.compile(i,this.options)}return i.ri(t,n,r)},rs:function(e,t,n){var r=e[e.length-1];if(!l(r)){n(e,t,this);return}for(var i=0;i<r.length;i++){e.push(r[i]);n(e,t,this);e.pop()}},s:function(e,t,n,r,i,s,o){var u;if(l(e)&&e.length===0){return false}if(typeof e=="function"){e=this.ls(e,t,n,r,i,s,o)}u=e===""||!!e;if(!r&&u&&t){t.push(typeof e=="object"?e:t[t.length-1])}return u},d:function(e,t,n,r){var i=e.split("."),s=this.f(i[0],t,n,r),o=null;if(e==="."&&l(t[t.length-2])){return t[t.length-1]}for(var u=1;u<i.length;u++){if(s&&typeof s=="object"&&i[u]in s){o=s;s=s[i[u]]}else{s=""}}if(r&&!s){return false}if(!r&&typeof s=="function"){t.push(o);s=this.lv(s,t,n);t.pop()}return s},f:function(e,t,n,r){var i=false,s=null,o=false;for(var u=t.length-1;u>=0;u--){s=t[u];if(s&&typeof s=="object"&&e in s){i=s[e];o=true;break}}if(!o){return r?false:""}if(!r&&typeof i=="function"){i=this.lv(i,t,n)}return i},ho:function(e,t,n,r,i){var s=this.c;var o=this.options;o.delimiters=i;var r=e.call(t,r);r=r==null?String(r):r.toString();this.b(s.compile(r,o).render(t,n));return false},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");this.buf=[];return e}:function(){var e=this.buf;this.buf="";return e},ls:function(e,t,n,r,i,s,o){var u=t[t.length-1],a=null;if(!r&&this.c&&e.length>0){return this.ho(e,u,n,this.text.substring(i,s),o)}a=e.call(u);if(typeof a=="function"){if(r){return true}else if(this.c){return this.ho(a,u,n,this.text.substring(i,s),o)}}return a},lv:function(e,t,n){var r=t[t.length-1];var i=e.call(r);if(typeof i=="function"){i=a(i.call(r));if(this.c&&~i.indexOf("{{")){return this.c.compile(i,this.options).render(r,n)}}return a(i)}};var n=/&/g,r=/</g,i=/>/g,s=/\'/g,o=/\"/g,u=/[&<>\"\']/;var l=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}})(window.Hogan,true);(function(e){function u(e){if(e.n.substr(e.n.length-1)==="}"){e.n=e.n.substring(0,e.n.length-1)}}function a(e){if(e.trim){return e.trim()}return e.replace(/^\s*|\s*$/g,"")}function f(e,t,n){if(t.charAt(n)!=e.charAt(0)){return false}for(var r=1,i=e.length;r<i;r++){if(t.charAt(n+r)!=e.charAt(r)){return false}}return true}function l(e,t,n,r){var i=[],s=null,o=null;while(e.length>0){o=e.shift();if(o.tag=="#"||o.tag=="^"||c(o,r)){n.push(o);o.nodes=l(e,o.tag,n,r);i.push(o)}else if(o.tag=="/"){if(n.length===0){throw new Error("Closing tag without opener: /"+o.n)}s=n.pop();if(o.n!=s.n&&!h(o.n,s.n,r)){throw new Error("Nesting error: "+s.n+" vs. "+o.n)}s.end=o.i;return i}else{i.push(o)}}if(n.length>0){throw new Error("missing closing tag: "+n.pop().n)}return i}function c(e,t){for(var n=0,r=t.length;n<r;n++){if(t[n].o==e.n){e.tag="#";return true}}}function h(e,t,n){for(var r=0,i=n.length;r<i;r++){if(n[r].c==e&&n[r].o==t){return true}}}function p(e){return e.replace(s,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(i,"\\r")}function d(e){return~e.indexOf(".")?"d":"f"}function v(e){var t="";for(var n=0,r=e.length;n<r;n++){var i=e[n].tag;if(i=="#"){t+=m(e[n].nodes,e[n].n,d(e[n].n),e[n].i,e[n].end,e[n].otag+" "+e[n].ctag)}else if(i=="^"){t+=g(e[n].nodes,e[n].n,d(e[n].n))}else if(i=="<"||i==">"){t+=y(e[n])}else if(i=="{"||i=="&"){t+=b(e[n].n,d(e[n].n))}else if(i=="\n"){t+=E('"\\n"'+(e.length-1==n?"":" + i"))}else if(i=="_v"){t+=w(e[n].n,d(e[n].n))}else if(i===undefined){t+=E('"'+p(e[n])+'"')}}return t}function m(e,t,n,r,i,s){return"if(_.s(_."+n+'("'+p(t)+'",c,p,1),'+"c,p,0,"+r+","+i+',"'+s+'")){'+"_.rs(c,p,"+"function(c,p,_){"+v(e)+"});c.pop();}"}function g(e,t,n){return"if(!_.s(_."+n+'("'+p(t)+'",c,p,1),c,p,1,0,0,"")){'+v(e)+"};"}function y(e){return'_.b(_.rp("'+p(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function b(e,t){return"_.b(_.t(_."+t+'("'+p(e)+'",c,p,0)));'}function w(e,t){return"_.b(_.v(_."+t+'("'+p(e)+'",c,p,0)));'}function E(e){return"_.b("+e+");"}var t=/\S/,n=/\"/g,r=/\n/g,i=/\r/g,s=/\\/g,o={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};e.scan=function(n,r){function S(){if(v.length>0){m.push(new String(v));v=""}}function x(){var e=true;for(var n=b;n<m.length;n++){e=m[n].tag&&o[m[n].tag]<o["_v"]||!m[n].tag&&m[n].match(t)===null;if(!e){return false}}return e}function T(e,t){S();if(e&&x()){for(var n=b,r;n<m.length;n++){if(!m[n].tag){if((r=m[n+1])&&r.tag==">"){r.indent=m[n].toString()}m.splice(n,1)}}}else if(!t){m.push({tag:"\n"})}g=false;b=m.length}function N(e,t){var n="="+E,r=e.indexOf(n,t),i=a(e.substring(e.indexOf("=",t)+1,r)).split(" ");w=i[0];E=i[1];return r+n.length-1}var i=n.length,s=0,l=1,c=2,h=s,p=null,d=null,v="",m=[],g=false,y=0,b=0,w="{{",E="}}";if(r){r=r.split(" ");w=r[0];E=r[1]}for(y=0;y<i;y++){if(h==s){if(f(w,n,y)){--y;S();h=l}else{if(n.charAt(y)=="\n"){T(g)}else{v+=n.charAt(y)}}}else if(h==l){y+=w.length-1;d=o[n.charAt(y+1)];p=d?n.charAt(y+1):"_v";if(p=="="){y=N(n,y);h=s}else{if(d){y++}h=c}g=y}else{if(f(E,n,y)){m.push({tag:p,n:a(v),otag:w,ctag:E,i:p=="/"?g-E.length:y+w.length});v="";y+=E.length-1;h=s;if(p=="{"){if(E=="}}"){y++}else{u(m[m.length-1])}}}else{v+=n.charAt(y)}}}T(g,true);return m};e.generate=function(t,n,r){var i='var _=this;_.b(i=i||"");'+v(t)+"return _.fl();";if(r.asString){return"function(c,p,i){"+i+";}"}return new e.Template(new Function("c","p","i",i),n,e,r)};e.parse=function(e,t,n){n=n||{};return l(e,"",[],n.sectionTags||[])},e.cache={};e.compile=function(e,t){t=t||{};var n=e+"||"+!!t.asString;var r=this.cache[n];if(r){return r}r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t);return this.cache[n]=r}})(window.Hogan);(function(e,t){e.Mustache={to_html:function(e,n){var r=t.compile(e);return r.render(n)}}})(window,Hogan)}(t.exports,t,e);e.____MODULES["db62bc269e34459021d4fceeaa57308f"]=t.exports})(this);(function(e){var t={id:"fe84b0b9d47dc2feed8b14b3d6c1c878",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){e.____MODULES["db62bc269e34459021d4fceeaa57308f"]}(t.exports,t,e);e.____MODULES["fe84b0b9d47dc2feed8b14b3d6c1c878"]=t.exports})(this);(function(e){var t={id:"1efa2ee4f7ef1de83a2c72b934057e89",filename:"thirdLogin.mustache",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["thirdLogin"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<div class="js_content" style="border: 1px solid #dadada;border-radius:3px;box-shadow: 0 0 5px 1px #e0e0e0;background-color: #fff;">');r.b("\n"+n);r.b("	<div style=\"position: relative;padding:30px 30px; overflow:hidden;font: 14px/22px 'Microsoft YaHei';\">");r.b("\n"+n);r.b('	<span style="float:left;width: 32px;height: 33px;vertical-align: middle;margin-right: 8px;margin-top: 3px;background:url(//source.qunarzz.com/site/images/travel/travel_space/album/fans_btn.png) -48px -209px;"></span>');r.b("\n"+n);r.b('	<p style="overflow:hidden;">');r.b("\n"+n);r.b("hey，合作网站帐号，请先绑定qunar帐户后再发表内容哦～<br/>");r.b("\n"+n);r.b('<span id="num">3</span>秒后将自动跳转</p>');r.b("\n"+n);r.b('<a href="#" class="js_close" style="position: absolute;top: 8px;right: 8px;');r.b("\n"+n);r.b('width: 12px;height: 12px;background: url(//source.qunarzz.com/site/images/travel/travel_space/album/collect_icon_ie.png) no-repeat -1px -2px;"></a>');r.b("\n"+n);r.b("	</div>");r.b("\n"+n);r.b("</div>");return r.fl();});if(typeof t!=="undefined")t.exports=window.QTMPL["thirdLogin"]}(t.exports,t,e);e.____MODULES["1efa2ee4f7ef1de83a2c72b934057e89"]=t.exports})(this);(function(e){var t={id:"d94ec78883e8e0bc18610a8978dcffcd",filename:"MOBILE_DIALOG.mustache",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["MOBILE_DIALOG"]=new window.Hogan.Template(function(e,t,n){var r=this;r.b(n=n||"");r.b('<div class="js_content upload-dialog mobile-dialog">');r.b("\n"+n);r.b('	<h3 class="tit"><span class="js_close"></span>手机绑定</h3>');r.b("\n"+n);r.b('	<p class="tips"><img src="//source.qunarzz.com/site/images/travel/place/icon_error_03.jpg" class="icon">您还未绑定手机，绑定后才可继续发表内容。</p>');r.b("\n"+n);r.b('	<div class="btn"><a data-url="//user.qunar.com/userinfo/account.jsp" href="http://user.qunar.com/index.jsp#home" target="_self" class="bind-btn">立即绑定</a></div>');r.b("\n"+n);r.b("</div>");r.b("\n"+n);r.b("\n");return r.fl();});if(typeof t!=="undefined")t.exports=window.QTMPL["MOBILE_DIALOG"]}(t.exports,t,e);e.____MODULES["d94ec78883e8e0bc18610a8978dcffcd"]=t.exports})(this);(function(e){var t={id:"305a15b03877751ddae75382735c82be",filename:"login.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){e.____MODULES["fe84b0b9d47dc2feed8b14b3d6c1c878"];e.____MODULES["1efa2ee4f7ef1de83a2c72b934057e89"];e.____MODULES["d94ec78883e8e0bc18610a8978dcffcd"];(function(e,t){function n(e){var t=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("link");n.rel="stylesheet";n.type="text/css";n.href=e;t.insertBefore(n,t.firstChild)}function r(e){this.config=e||{};this._init()}function i(){if(!t.thirdLoginDialog){t.thirdLoginDialog=new TravelDialog2nd({content:QTMPL.thirdLogin.render({})});t.thirdLoginDialog.num=t.thirdLoginDialog.getContainer().find("#num")}t.thirdLoginDialog.show();t.thirdLogintimer=setInterval(function(){var e=t.thirdLoginDialog.num.text()*1;if(e>1){t.thirdLoginDialog.num.text(e-1)}else{t.thirdLogintimer=null;t.location="http://user.qunar.com/userBind/bind.jsp?ret="+encodeURIComponent(location.href)}},1e3)}r.showModileDialog=function(n){var r,i;if(!t.mobileDialog){t.mobileDialog=new TravelDialog2nd({closeCls:"close",content:QTMPL.MOBILE_DIALOG.render({})})}setTimeout(function(){t.mobileDialog.show();r=t.mobileDialog.getContainer().find(".bind-btn");i=r.data("url")+"?ret="+escape(location.href)+"#/modify/mobile-bind";r.attr("href",i);e(t.mobileDialog).on(":eventClose",function(r){n&&n(i);e(t.mobileDialog).off(":eventClose")})},200)};r.checkMobile=function(t,n,i){e.ajax({url:"//travel.qunar.com/space/invite/getBind",dataType:"json",data:{csrfToken:e.cookie("csrfToken")},cache:false,success:function(s){if(s){switch(s.errcode){case 0:if(s.data&&s.data.qunarUserId!=0){if(!s.data.isBindMobile){r.showModileDialog(n)}else{t&&e.isFunction(t)&&t()}}break;default:e.isFunction(i)&&i(s);break}}}})};r.isLogin=function(t,n,r){e.ajax({url:"//travel.qunar.com/space/invite/getBind",dataType:"json",data:{csrfToken:e.cookie("csrfToken")},cache:false,success:function(i){if(i&&i.errcode===0&&i.data){if(i.data.qunarUserId!=0){t&&e.isFunction(t)&&t()}else n&&e.isFunction(n)&&n()}else{r&&e.isFunction(r)&&r()}}})};r.show=function(s){r.isLogin(s,i,function(){n("https://user.qunar.com/webApi/popup.jsp?css=ssl");e.getScript("https://user.qunar.com/webApi/popup.jsp?js=ssl",function(){new e.LoginPop({callback:function(n){var r=n.vcookie;if(r&&r!=""){n.errcode=0}else{n.errcode=1}if(s&&e.isFunction(s)){s()}else t.location.reload()},proxy:"/space/proxy_nc.html",twoWeek:false,regFlag:false,union:true,skipBind:true,notice:""})})})};r.prototype={constructor:r,_init:function(){this.noticeMsg=this.config.noticeMsg||"请先登录！ ";this.callbackFun=this.config.callbackFun},show:function(s){var o=this;r.isLogin(s,i,function(){n("https://user.qunar.com/webApi/popup.jsp?css=ssl");e.getScript("https://user.qunar.com/webApi/popup.jsp?js=ssl",function(){new e.LoginPop({callback:function(e){var n=e.vcookie;if(n&&n!=""){e.errcode=0}else{e.errcode=1}if(o.callbackFun){o.callbackFun(e)}else{t.location.reload()}},proxy:"/space/proxy_nc.html",twoWeek:false,regFlag:false,union:true,skipBind:true,notice:o.noticeMsg})})})},hide:function(){}};t.LoginDialog=r})(jQuery,window);n.exports=window.LoginDialog}(t.exports,t,e);e.____MODULES["305a15b03877751ddae75382735c82be"]=t.exports})(this);(function(e){var t={id:"23ef6364424b3d08187fcb6592ce034b",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){e.____MODULES["b5b8fd55ca562d4a45d8a12f6b9d8424"];e.____MODULES["a58c1acad08916deab0140209747c4d0"];n.exports=e.____MODULES["305a15b03877751ddae75382735c82be"]}(t.exports,t,e);e.____MODULES["23ef6364424b3d08187fcb6592ce034b"]=t.exports})(this);(function(e){var t={id:"6ac7790f30834a52a0fd00cb953947c4",filename:"step_one.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function d(){f.init();a.init();l.init();c.init();h.init();m();v()}function v(){var e=$(".b_books_shortcut");if(e.length){e.find(".book_item").bind("mouseenter",function(){$(this).addClass("book_item_hover")}).bind("mouseleave",function(){$(this).removeClass("book_item_hover")});var t=new u({content:$(".b_books_shortcut"),titleVisible:false,closeCls:"btn_close",hideCloseBtn:false});e.show();t.show();t.getContainer().delegate(".js_close","click",function(){s.trigger("add_city_in_plan")})}}function m(){var e=QNR.Storage;var t=!!e.getItem("plan_had_know");if(!t){var n='<div class="user_tip_mod">                        <div class="user_tip_bg"></div>                        <div class="user_tip_content">                            <div class="user_tip_one hide"></div>                            <div class="user_tip_two hide"></div>                            <div class="user_tip_three hide"></div>                        </div>                    </div>';var r=$(n).hide();var i;$("body").append(r);if(QNR.Browser.isIE6){var s=r.find(".user_tip_bg,.user_tip_content");function o(){var e=this.height();s.css({height:e+"px"});r.css({height:e+"px"})}p.bind("resize.tip",$.proxy(o,p));o.apply(p)}r.show();r.find("div.user_tip_one").fadeIn();setTimeout(function(){r.find("div.user_tip_two").fadeIn()},800);setTimeout(function(){r.find("div.user_tip_three").click(function(){if(i){clearTimeout(i);i=null}e.setItem("plan_had_know",1);r.hide()}).fadeIn()},1600)}}var i=e.____MODULES["67e7812dffaeb4f7dd1863a4d34f02cb"];var s=e.____MODULES["a095de22ed4d682bf11f9da6451a2556"];var o=e.____MODULES["41babe22ebb465e6e80fb775c91c4c90"];var u=e.____MODULES["9107c28b5689cd09e17d4039d9133542"];var a=e.____MODULES["9e2717a0ddb552d5511cab6947bdfe87"];var f=e.____MODULES["2848b63772f83d31654e510fd916c91a"];var l=e.____MODULES["a8d208d8caf61c8000916197cca54178"];var c=e.____MODULES["041cbc7a84b01624e82163ddaba7b558"];var h=e.____MODULES["e13121ee3b37332d461ff5a12f813a3f"];e.____MODULES["4f04804537728a786fda904b6a7d8ac4"];e.____MODULES["23ef6364424b3d08187fcb6592ce034b"];var p=$(window);d()}(t.exports,t,e);e.____MODULES["6ac7790f30834a52a0fd00cb953947c4"]=t.exports})(this)